<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/tpaaaaaa.github.io/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/tpaaaaaa.github.io/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/tpaaaaaa.github.io/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/tpaaaaaa.github.io/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/tpaaaaaa.github.io/images/favicon.ico?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/tpaaaaaa.github.io/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/tpaaaaaa.github.io/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="个人blog">
<meta property="og:type" content="website">
<meta property="og:title" content="Tian&#39;s Blog">
<meta property="og:url" content="https:&#x2F;&#x2F;tpaaaaaa.github.io&#x2F;page&#x2F;10&#x2F;index.html">
<meta property="og:site_name" content="Tian&#39;s Blog">
<meta property="og:description" content="个人blog">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/tpaaaaaa.github.io/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://tpaaaaaa.github.io/page/10/"/>





  <title>Tian's Blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/tpaaaaaa.github.io/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Tian's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">对未来真正的慷慨，在于把一切都献给现在.</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/tpaaaaaa.github.io/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/tpaaaaaa.github.io/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tpaaaaaa.github.io/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/tpaaaaaa.github.io/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            Categories
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" target="_blank" rel="noopener" onclick="return false;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="Searching..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://tpaaaaaa.github.io/tpaaaaaa.github.io/2019/10/06/POJ2947WidgetFactory/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="我玩维恩不学q">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/tpaaaaaa.github.io/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Tian's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/tpaaaaaa.github.io/2019/10/06/POJ2947WidgetFactory/" itemprop="url">POJ 2947 Widget Factory</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-10-06T22:41:52+08:00">
                2019-10-06
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/tpaaaaaa.github.io/categories/%E6%95%B0%E8%AE%BA/" itemprop="url" rel="index">
                    <span itemprop="name">数论</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Widget Factory</p>
<p><strong>Time Limit:</strong> 7000MS</p>
<p><strong>Memory Limit:</strong> 65536K</p>
<p><strong>Total Submissions:</strong> 7516</p>
<p><strong>Accepted:</strong> 2632</p>
<p>DescriptionThe widget factory produces several different kinds of widgets. Each widget is carefully built by a skilled widgeteer. The time required to build a widget depends on its type: the simple widgets need only 3 days, but the most complex ones may need as many as 9 days. </p>
<p>The factory is currently in a state of complete chaos: recently, the factory has been bought by a new owner, and the new director has fired almost everyone. The new staff know almost nothing about building widgets, and it seems that no one remembers how many days are required to build each diofferent type of widget. This is very embarrassing when a client orders widgets and the factory cannot tell the client how many days are needed to produce the required goods. Fortunately, there are records that say for each widgeteer the date when he started working at the factory, the date when he was fired and what types of widgets he built. The problem is that the record does not say the exact date of starting and leaving the job, only the day of the week. Nevertheless, even this information might be helpful in certain cases: for example, if a widgeteer started working on a Tuesday, built a Type 41 widget, and was fired on a Friday,then we know that it takes 4 days to build a Type 41 widget. Your task is to figure out from these records (if possible) the number of days that are required to build the different types of widgets.   </p>
<p>InputThe input contains several blocks of test cases. Each case begins with a line containing two integers: the number 1 ≤ n ≤ 300 of the different types, and the number 1 ≤ m ≤ 300 of the records. This line is followed by a description of the m records. Each record is described by two lines. The first line contains the total number 1 ≤ k ≤ 10000 of widgets built by this widgeteer, followed by the day of week when he/she started working and the day of the week he/she was fired. The days of the week are given bythe strings `MON’, `TUE’, `WED’, `THU’, `FRI’, `SAT’ and `SUN’. The second line contains k integers separated by spaces. These numbers are between 1 and n , and they describe the diofferent types of widgets that the widgeteer built. For example, the following two lines mean that the widgeteer started working on a Wednesday, built a Type 13 widget, a Type 18 widget, a Type 1 widget, again a Type 13 widget,and was fired on a Sunday. </p>
<p>4 WED SUN<br>13 18 1 13 </p>
<p>Note that the widgeteers work 7 days a week, and they were working on every day between their first and last day at the factory (if you like weekends and holidays, then do not become a widgeteer!). </p>
<p>The input is terminated by a test case with n = m = 0 .</p>
<p>OutputFor each test case, you have to output a single line containing n integers separated by spaces: the number of days required to build the different types of widgets. There should be no space before the first number or after the last number, and there should be exactly one space between two numbers. If there is more than one possible solution for the problem, then write `Multiple solutions.’ (without the quotes). If you are sure that there is no solution consistent with the input, then write `Inconsistent data.’(without the quotes).</p>
<p>Sample Input</p>
<p>2 3<br>2 MON THU<br>1 2<br>3 MON FRI<br>1 1 2<br>3 MON SUN<br>1 2 2<br>10 2<br>1 MON TUE<br>3<br>1 MON WED<br>3<br>0 0</p>
<p>Sample Output</p>
<p>8 3<br>Inconsistent data.</p>
<p>HintHuge input file, ‘scanf’ recommended to avoid TLE. </p>
<h2 id="分析："><a href="#分析：" class="headerlink" title="分析："></a>分析：</h2><p>高斯消元法解模线性方程组。可做模板。</p>
<h2 id="代码："><a href="#代码：" class="headerlink" title="代码："></a>代码：</h2><pre><code>/*
Date              : 2019-10-06    13:47:45
By                : Tpaaaaaa
File_Name         ：POJ 2947 Widget Factory.cpp（重新写一个）.cpp
Description       : 
目前正在专项刷题，为了保证效果。
必须做到：
   1，先想出完整思路，并分析复杂度。
   2. 按照自己的思路过一遍样例，自己编几个复杂的样例
   3. 编写代码的时候，规范风格（例如变量名）
   4. 模块化答题

*/
#include&lt;functional&gt;
#include&lt;cstdio&gt;
#include&lt;cstring&gt;
#include&lt;algorithm&gt;
#include&lt;iostream&gt;
#include&lt;string&gt;
#include&lt;vector&gt;
#include&lt;stack&gt;
#include&lt;bitset&gt;
#include&lt;cstdlib&gt;
#include&lt;cmath&gt;
#include&lt;set&gt;
#include&lt;list&gt;
#include&lt;deque&gt;
#include&lt;map&gt;
#include&lt;queue&gt;
#define md(x, y)  (x + y) / 2
#define ls(x)      x &lt;&lt; 1
#define rs(x)      x &lt;&lt; 1 | 1
#define fileopen freopen(&quot;in.txt&quot;, &quot;r&quot;, stdin); freopen(&quot;out.txt&quot;, &quot;w&quot;, stdout)
#define fileclose fclose(stdin); fclose(stdout)
using namespace std;
typedef long long ll;
typedef unsigned long long ull;
const double PI = acos(-1.0);
const double eps = 1e-6;
const int INF = 0x3f3f3f3f;
const int MAXN = 310;
const int MOD = 7;
int x[MAXN];
int a[MAXN][MAXN];
int n, m;               //m是方程数，n是变量数
int gcd(int a, int b)
{
    if(b == 0)  return a;
    return gcd(b, a%b);
}
int lcm(int a, int b)
{
    return a/gcd(a, b) * b;
}
int exGcd(int a, int b, int &amp;x, int &amp;y)
{
    if(b == 0)
    {
        x = 1;
        y = 0;
        return a;
    }
    else
    {
        int d = exGcd(b, a % b, y, x);
        y -= x*a/b;             //????喵喵喵？？？？？
        return d;
    }
}
int getNum(char temp[])
{
    char cmp[7][10] = {&quot;MON&quot;, &quot;TUE&quot;, &quot;WED&quot;, &quot;THU&quot;, &quot;FRI&quot;, &quot;SAT&quot;, &quot;SUN&quot;};
    for(int i = 0; i &lt; 7; i++)
        if(strcmp(temp, cmp[i]) == 0)
            return i + 1;
    return -1;
}
//equ个方程，val个变量
//
int Gauss(int equ, int var)
{
    memset(x, 0, sizeof x);
    int col, row;
    for(row = 0, col = 0; row &lt; equ &amp;&amp; col &lt; var; col ++, row ++)
    {
        int max_r;
        for(max_r = row; max_r &lt; equ; max_r++)
            if(a[max_r][col])
                break;

        if(max_r == equ)
        {
            row --;
            continue;
        }
        if(max_r != row)
            for(int j = 0; j &lt;= var; j++)
                swap(a[max_r][j], a[row][j]);

        for(int i = row + 1; i &lt; equ; i++)
        {
            if(a[i][col] == 0)  continue;
            int LCM = lcm(a[row][col], a[i][col]);
            int ta = LCM / a[i][col];
            int tb = LCM / a[row][col];
            for(int j = col; j &lt;= var; j++)
                a[i][j] = ((a[i][j] * ta - a[row][j] * tb) % MOD + MOD) % MOD;
        }
    }
    //无解
    //
    for(int i = row; i &lt; equ; i++)
        if(a[i][col])   return -1;
    if(row &lt; var)         return 0;
    for(int i = equ - 1; i &gt;= 0; i--)
    {
        int temp = a[i][var];
        for(int j = i + 1; j &lt; var; j++)
            temp = ((temp - a[i][j] * x[j])%MOD + MOD) % MOD;
        int b = temp;
        int X, Y;
        int d = exGcd(a[i][i], MOD, X, Y);
        X = X * (b / d) % MOD;
        X =(X % (MOD / d) + (MOD / d)) % (MOD / d);
        if(X &lt; 3)   X += 7;
        x[i] = X; 

    }
    return 1;
}
int main()
{   
    int start, fire, k;
    char A[10], B[10];
    while(scanf(&quot;%d%d&quot;, &amp;n, &amp;m) &amp;&amp; n + m )
    {
        memset(a, 0, sizeof a);
        for(int i = 0; i &lt; m; i++)
        {
            scanf(&quot;%d %s %s&quot;, &amp;k, A, B);
            start = getNum(A);
            fire  = getNum(B);
            int day = fire - start + 1;
            a[i][n] = (day % MOD + MOD) % MOD;
            for(int j = 0; j &lt; k; j++)
            {
                int temp;
                scanf(&quot;%d&quot;, &amp;temp);
                a[i][temp - 1] = (a[i][temp - 1] + 1) % MOD;
            }
        }
        int ans = Gauss(m, n);              //从第一行开始.
        if(ans == 0)
            printf(&quot;Multiple solutions.\n&quot;);
        else if(ans == -1)
            printf(&quot;Inconsistent data.\n&quot;);
        else
        {
            printf(&quot;%d&quot;, x[0]);
            for(int i = 1; i &lt; n; i++)
                printf(&quot; %d&quot;, x[i]);
            printf(&quot;\n&quot;);
        }
    }
    return 0;
}</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://tpaaaaaa.github.io/tpaaaaaa.github.io/2019/10/06/POJ-1681Painter'sProblem/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="我玩维恩不学q">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/tpaaaaaa.github.io/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Tian's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/tpaaaaaa.github.io/2019/10/06/POJ-1681Painter'sProblem/" itemprop="url">POJ - 1681 Painter's Problem</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-10-06T22:38:49+08:00">
                2019-10-06
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/tpaaaaaa.github.io/categories/%E6%95%B0%E8%AE%BA/" itemprop="url" rel="index">
                    <span itemprop="name">数论</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>There is a square wall which is made of n*n small square bricks. Some bricks are white while some bricks are yellow. Bob is a painter and he wants to paint all the bricks yellow. But there is something wrong with Bob’s brush. Once he uses this brush to paint brick (i, j), the bricks at (i, j), (i-1, j), (i+1, j), (i, j-1) and (i, j+1) all change their color. Your task is to find the minimum number of bricks Bob should paint in order to make all the bricks yellow.   </p>
<p><img src="https://vj.z180.cn/7d20b479261eb8fa1c1f3f948676182f?v=1570353995" alt=""></p>
<p>InputThe first line contains a single integer t (1 &lt;= t &lt;= 20) that indicates the number of test cases. Then follow the t cases. Each test case begins with a line contains an integer n (1 &lt;= n &lt;= 15), representing the size of wall. The next n lines represent the original wall. Each line contains n characters. The j-th character of the i-th line figures out the color of brick at position (i, j). We use a ‘w’ to express a white brick while a ‘y’ to express a yellow brick.OutputFor each case, output a line contains the minimum number of bricks Bob should paint. If Bob can’t paint all the bricks yellow, print ‘inf’.Sample Input</p>
<p>2<br>3<br>yyy<br>yyy<br>yyy<br>5<br>wwwww<br>wwwww<br>wwwww<br>wwwww<br>wwwww</p>
<p>Sample Output</p>
<p>0<br>15</p>
<h2 id="分析："><a href="#分析：" class="headerlink" title="分析："></a>分析：</h2><p>对于无解的情况，返回INF，有多个解的时候，要返回最小的。可以作为模板哦</p>
<h2 id="代码："><a href="#代码：" class="headerlink" title="代码："></a>代码：</h2><pre><code>/*
Date              : 2019-10-06    16:27:37
By                : Tpaaaaaa
File_Name         ：Painter&apos;s Problem POJ1681.cpp
Description       : 
目前正在专项刷题，为了保证效果。
必须做到：
   1，先想出完整思路，并分析复杂度。
   2. 按照自己的思路过一遍样例，自己编几个复杂的样例
   3. 编写代码的时候，规范风格（例如变量名）
   4. 模块化答题


眼睛越来越瞎了   QAQ
然而这个写法并不严谨。我们要枚举自由变量的取值，然后再去求出每个情况的sum值，取最小
*/
#include&lt;functional&gt;
#include&lt;cstdio&gt;
#include&lt;cstring&gt;
#include&lt;algorithm&gt;
#include&lt;iostream&gt;
#include&lt;string&gt;
#include&lt;vector&gt;
#include&lt;stack&gt;
#include&lt;bitset&gt;
#include&lt;cstdlib&gt;
#include&lt;cmath&gt;
#include&lt;set&gt;
#include&lt;list&gt;
#include&lt;deque&gt;
#include&lt;map&gt;
#include&lt;queue&gt;
#define md(x, y)  (x + y) / 2
#define ls(x)      x &lt;&lt; 1
#define rs(x)      x &lt;&lt; 1 | 1
#define fileopen freopen(&quot;in.txt&quot;, &quot;r&quot;, stdin); freopen(&quot;out.txt&quot;, &quot;w&quot;, stdout)
#define fileclose fclose(stdin); fclose(stdout)
using namespace std;
typedef long long ll;
typedef unsigned long long ull;
const double PI = acos(-1.0);
const double eps = 1e-6;
const int INF = 0x3f3f3f3f;
const int MAXN = 300;
int a[MAXN][MAXN], x[MAXN];
int free_x[MAXN];
int Gauss(int n)
{
    int num = 0;
    memset(free_x, 0, sizeof free_x);
    memset(x, 0, sizeof x); 
    int col = 0, row = 0;
    int max_r;
    for(; col &lt; n &amp;&amp; row &lt; n; col++, row++)
    {
        max_r = row;
        for(int i = row + 1; i &lt; n; i++)
            if(a[i][col] &gt; a[max_r][col])   max_r = i;

        if(max_r != row)
            for(int i = col; i &lt;= n; i++)
                swap(a[max_r][i], a[row][i]);
        if(a[row][col] == 0)
        {
            row --;
            free_x[num++] = col;
            continue;
        }
        //开始消了
        for(int i = row + 1; i &lt; n; i++)
            if(a[i][col])
                for(int j = col; j &lt;= n; j++)
                    a[i][j] ^= a[row][j];
    }
    //无解的情况就是
    for(int i = row; i &lt; n; i++)
        if(a[i][col])   return -1;
    //多个解的情况，返回的是最小的解
    int res = INF;
    int up = 1 &lt;&lt; (n - row);            
    for(int i = 0; i &lt; up; i++)
    {
        int cnt = 0;
        int index = i;
        for(int j = 0; j &lt; n - row; j++)
        {
            x[free_x[j]] = index &amp; 1;
            if(x[free_x[j]])    cnt++;
            index &gt;&gt;= 1;
        }
        for(int j = row - 1; j &gt;= 0; j--)
        {
            int temp = a[j][n];
            for(int l = j + 1; l &lt; n; l++)
                if(a[j][l]) temp ^= x[l];
            x[j] = temp;
            if(x[j]) cnt++;
        }
        if(cnt &lt; res)  res = cnt;
    }
    return res;
}
void getA(int n)
{
    memset(a, 0, sizeof a);
    for(int i = 0; i &lt; n; i ++)
        for(int j = 0; j &lt; n;j ++)
        {
            int t = i * n + j;
            a[t][t] = 1;
            int up = (i - 1) * n + j;
            int down = (i + 1) * n + j;
            int left = i * n + j - 1;
            int right = i * n + j + 1;
            if(i &gt; 0)   a[up][t] = 1;
            if(j &gt; 0)   a[left][t] = 1;
            if(i &lt; n - 1)   a[down][t] = 1;
            if(j &lt; n - 1)   a[right][t] = 1;
        }
}
int main()
{
    int t, n;
    char ch;
    cin &gt;&gt;t;
    while(t--)
    {
        scanf(&quot;%d&quot;, &amp;n);
        getA(n);
        for(int i = 0; i &lt; n; i++)
            for(int j = 0; j &lt; n; j++)
            {
                int t = i * n + j;
                cin &gt;&gt; ch;
                //直接想象那个矩阵
                if(ch == &apos;y&apos;) a[t][n * n] = 0;
                else if(ch == &apos;w&apos;) a[t][n * n] = 1;
            }
        //我好傻
        int ans = Gauss(n * n);
        if(ans == -1)
            printf(&quot;inf\n&quot;);
        else    printf(&quot;%d\n&quot;, ans);

    }
    return 0;
}</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://tpaaaaaa.github.io/tpaaaaaa.github.io/2019/10/06/POJ-1753FlipGame/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="我玩维恩不学q">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/tpaaaaaa.github.io/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Tian's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/tpaaaaaa.github.io/2019/10/06/POJ-1753FlipGame/" itemprop="url">POJ - 1753 Flip Game</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-10-06T22:36:04+08:00">
                2019-10-06
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/tpaaaaaa.github.io/categories/%E6%95%B0%E8%AE%BA/" itemprop="url" rel="index">
                    <span itemprop="name">数论</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Flip game is played on a rectangular 4x4 field with two-sided pieces placed on each of its 16 squares. One side of each piece is white and the other one is black and each piece is lying either it’s black or white side up. Each round you flip 3 to 5 pieces, thus changing the color of their upper side from black to white and vice versa. The pieces to be flipped are chosen every round according to the following rules:   </p>
<ol>
<li><p>Choose any one of the 16 pieces.   </p>
</li>
<li><p>Flip the chosen piece and also all adjacent pieces to the left, to the right, to the top, and to the bottom of the chosen piece (if there are any).</p>
</li>
</ol>
<p><img src="https://vj.z180.cn/14b4b3ec0b5261bea3a5ad9f1313252c?v=1570137601" alt=""></p>
<p>Consider the following position as an example: </p>
<p>bwbw<br>wwww<br>bbwb<br>bwwb<br>Here “b” denotes pieces lying their black side up and “w” denotes pieces lying their white side up. If we choose to flip the 1st piece from the 3rd row (this choice is shown at the picture), then the field will become: </p>
<p>bwbw<br>bwww<br>wwwb<br>wwwb<br>The goal of the game is to flip either all pieces white side up or all pieces black side up. You are to write a program that will search for the minimum number of rounds needed to achieve this goal.<br>InputThe input consists of 4 lines with 4 characters “w” or “b” each that denote game field position.OutputWrite to the output file a single integer number - the minimum number of rounds needed to achieve the goal of the game from the given position. If the goal is initially achieved, then write 0. If it’s impossible to achieve the goal, then write the word “Impossible” (without quotes).Sample Input</p>
<p>bwwb<br>bbwb<br>bwwb<br>bwww</p>
<p>Sample Output</p>
<p>4</p>
<h2 id="分析："><a href="#分析：" class="headerlink" title="分析："></a>分析：</h2><p>开关问题。一般有两种方式，一种是暴力搜索，一种是高斯消元法。</p>
<p>可以作为解开关问题的模板。</p>
<h2 id="代码："><a href="#代码：" class="headerlink" title="代码："></a>代码：</h2><pre><code>/*
Date              : 2019-10-06    18:16:43
By                : Tpaaaaaa
File_Name         ：Flip Game POJ - 1753 .cpp
Description       : 
目前正在专项刷题，为了保证效果。
必须做到：
   1，先想出完整思路，并分析复杂度。
   2. 按照自己的思路过一遍样例，自己编几个复杂的样例
   3. 编写代码的时候，规范风格（例如变量名）
   4. 模块化答题

*/
#include&lt;functional&gt;
#include&lt;cstdio&gt;
#include&lt;cstring&gt;
#include&lt;algorithm&gt;
#include&lt;iostream&gt;
#include&lt;string&gt;
#include&lt;vector&gt;
#include&lt;stack&gt;
#include&lt;bitset&gt;
#include&lt;cstdlib&gt;
#include&lt;cmath&gt;
#include&lt;set&gt;
#include&lt;list&gt;
#include&lt;deque&gt;
#include&lt;map&gt;
#include&lt;queue&gt;
#define md(x, y)  (x + y) / 2
#define ls(x)      x &lt;&lt; 1
#define rs(x)      x &lt;&lt; 1 | 1
#define fileopen freopen(&quot;in.txt&quot;, &quot;r&quot;, stdin); freopen(&quot;out.txt&quot;, &quot;w&quot;, stdout)
#define fileclose fclose(stdin); fclose(stdout)
using namespace std;
typedef long long ll;
typedef unsigned long long ull;
const double PI = acos(-1.0);
const double eps = 1e-6;
const int INF = 0x3f3f3f3f;
const int MAXN = 20;
int a[MAXN][MAXN], b[MAXN][MAXN];
int x[MAXN], free_x[MAXN];
//想象一下是16*16的矩阵哦
//注意是翻成相同面
void getA()
{
    for(int i = 0; i &lt; 4; i++)
        for(int j = 0; j &lt; 4; j++)
        {
            int t = i * 4 + j;
            a[t][t] = 1;
            int up = (i - 1) * 4 + j;
            int down = (i + 1) * 4 + j;
            int left = i * 4 + j - 1;
            int right = i * 4 + j + 1;
            if(i &gt; 0)   a[up][t] = 1;
            if(i &lt; 3)   a[down][t] = 1;
            if(j &gt; 0)   a[left][t] = 1;
            if(j &lt; 3)   a[right][t] = 1; 
        }
}
//n * n的矩阵
//为0，为1都算一遍
//就是将原来的翻转一次即可.
int Gauss(int n)
{
    memset(x, 0, sizeof x);
    memset(free_x, 0, sizeof free_x);
    int col = 0, row = 0;
    int max_r, num = 0;
    for(;col &lt; n &amp;&amp; row &lt; n; col++, row++)
    {
        max_r = row;
        for(int i = row + 1; i &lt; n; i++)
            if(a[i][col] &gt; a[max_r][col])   max_r = i;
        if(max_r != row)
            for(int i = col; i &lt;= n; i++)
                swap(a[row][i], a[max_r][i]);
        if(a[row][col] == 0)
        {
            row --;
            free_x[num++] = col;
            continue;
        }
        //开始消
        for(int i = row + 1; i &lt; n; i++)
            if(a[i][col])
                for(int j = col; j &lt;= n; j++)
                  a[i][j] ^= a[row][j];
    }
    for(int i = row; i &lt; n; i++)
        if(a[i][col]) return INF;
    int up = 1 &lt;&lt; (n - row);
    int ans = INF;
    for(int i = 0; i &lt; up; i++)
    {
        int cnt = 0;
        int index = i;
        for(int j = 0; j &lt; (n - row); j++)
        {
            x[free_x[j]] = index &amp; 1;
            if(x[free_x[j]]) cnt++;
            index &gt;&gt;= 1;
        }
        //处理完了
        for(int j = row - 1; j &gt;= 0; j--)
        {
            //x[j] = a[j][n];
            int temp = a[j][n];
            for(int l = j + 1; l &lt; n; l++)
                if(a[j][l]) temp ^= x[l];

            x[j] = temp;
            if(x[j])
                cnt++;
        }
        if(cnt &lt; ans)
            ans = cnt;
    }
    return ans;             //我特么是个憨憨
}
int main()
{
    char ch;
    memset(a, 0, sizeof a);
    memset(b, 0, sizeof b);
    getA();
    for(int i = 0; i &lt; 16; i++)
    {
        cin &gt;&gt; ch;
        if(ch == &apos;b&apos;) 
                a[i][16] = 1;    
        else    a[i][16] = 0;
        b[i][16] = a[i][16] ^ 1;
    }
    int ans = Gauss(16);
    memcpy(a, b, sizeof b);
    getA();
    int temp = Gauss(16);
    if(temp &lt; ans)
        ans = temp;

    if(ans &gt;= INF)
        printf(&quot;Impossible\n&quot;);
    else
        printf(&quot;%d\n&quot;, ans);
    return 0;
}</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://tpaaaaaa.github.io/tpaaaaaa.github.io/2019/10/06/%5B%E6%A8%A1%E6%9D%BF%5D%E9%AB%98%E6%96%AF%E6%B6%88%E5%85%83%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="我玩维恩不学q">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/tpaaaaaa.github.io/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Tian's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/tpaaaaaa.github.io/2019/10/06/%5B%E6%A8%A1%E6%9D%BF%5D%E9%AB%98%E6%96%AF%E6%B6%88%E5%85%83%E6%B3%95/" itemprop="url">[模板]高斯消元法</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-10-06T22:32:47+08:00">
                2019-10-06
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/tpaaaaaa.github.io/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" itemprop="url" rel="index">
                    <span itemprop="name">数据结构</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>神奇。</p>
<p>模板</p>
<pre><code>#include&lt;stdio.h&gt;
#include&lt;algorithm&gt;
#include&lt;iostream&gt;
#include&lt;string.h&gt;
#include&lt;math.h&gt;
using namespace std;

const int MAXN=50;



int a[MAXN][MAXN];//增广矩阵
int x[MAXN];//解集
bool free_x[MAXN];//标记是否是不确定的变元



/*
void Debug(void)
{
    int i, j;
    for (i = 0; i &lt; equ; i++)
    {
        for (j = 0; j &lt; var + 1; j++)
        {
            cout &lt;&lt; a[i][j] &lt;&lt; &quot; &quot;;
        }
        cout &lt;&lt; endl;
    }
    cout &lt;&lt; endl;
}
*/


inline int gcd(int a,int b)
{
    int t;
    while(b!=0)
    {
        t=b;
        b=a%b;
        a=t;
    }
    return a;
}
inline int lcm(int a,int b)
{
    return a/gcd(a,b)*b;//先除后乘防溢出
}

// 高斯消元法解方程组(Gauss-Jordan elimination).(-2表示有浮点数解，但无整数解，
//-1表示无解，0表示唯一解，大于0表示无穷解，并返回自由变元的个数)
//有equ个方程，var个变元。增广矩阵行数为equ,分别为0到equ-1,列数为var+1,分别为0到var.
int Gauss(int equ,int var)
{
    int i,j,k;
    int max_r;// 当前这列绝对值最大的行.
    int col;//当前处理的列
    int ta,tb;
    int LCM;
    int temp;
    int free_x_num;
    int free_index;

    for(int i=0;i&lt;=var;i++)
    {
        x[i]=0;
        free_x[i]=true;
    }

    //转换为阶梯阵.
    col=0; // 当前处理的列
    for(k = 0;k &lt; equ &amp;&amp; col &lt; var;k++,col++)
    {// 枚举当前处理的行.
// 找到该col列元素绝对值最大的那行与第k行交换.(为了在除法时减小误差)
        max_r=k;
        for(i=k+1;i&lt;equ;i++)
        {
            if(abs(a[i][col])&gt;abs(a[max_r][col])) max_r=i;
        }
        if(max_r!=k)
        {// 与第k行交换.
            for(j=k;j&lt;var+1;j++) swap(a[k][j],a[max_r][j]);
        }
        if(a[k][col]==0)
        {// 说明该col列第k行以下全是0了，则处理当前行的下一列.
            k--;
            continue;
        }
        for(i=k+1;i&lt;equ;i++)
        {// 枚举要删去的行.
            if(a[i][col]!=0)
            {
                LCM = lcm(abs(a[i][col]),abs(a[k][col]));
                ta = LCM/abs(a[i][col]);
                tb = LCM/abs(a[k][col]);
                if(a[i][col]*a[k][col]&lt;0)tb=-tb;//异号的情况是相加
                for(j=col;j&lt;var+1;j++)
                {
                    a[i][j] = a[i][j]*ta-a[k][j]*tb;
                }
            }
        }
    }

  //  Debug();

    // 1. 无解的情况: 化简的增广阵中存在(0, 0, ..., a)这样的行(a != 0).
    for (i = k; i &lt; equ; i++)
    { // 对于无穷解来说，如果要判断哪些是自由变元，那么初等行变换中的交换就会影响，则要记录交换.
        if (a[i][col] != 0) return -1;
    }
    // 2. 无穷解的情况: 在var * (var + 1)的增广阵中出现(0, 0, ..., 0)这样的行，即说明没有形成严格的上三角阵.
    // 且出现的行数即为自由变元的个数.
    if (k &lt; var)
    {
        // 首先，自由变元有var - k个，即不确定的变元至少有var - k个.
        for (i = k - 1; i &gt;= 0; i--)
        {
            // 第i行一定不会是(0, 0, ..., 0)的情况，因为这样的行是在第k行到第equ行.
            // 同样，第i行一定不会是(0, 0, ..., a), a != 0的情况，这样的无解的.
            free_x_num = 0; // 用于判断该行中的不确定的变元的个数，如果超过1个，则无法求解，它们仍然为不确定的变元.
            for (j = 0; j &lt; var; j++)
            {
                if (a[i][j] != 0 &amp;&amp; free_x[j]) free_x_num++, free_index = j;
            }
            if (free_x_num &gt; 1) continue; // 无法求解出确定的变元.
            // 说明就只有一个不确定的变元free_index，那么可以求解出该变元，且该变元是确定的.
            temp = a[i][var];
            for (j = 0; j &lt; var; j++)
            {
                if (a[i][j] != 0 &amp;&amp; j != free_index) temp -= a[i][j] * x[j];
            }
            x[free_index] = temp / a[i][free_index]; // 求出该变元.
            free_x[free_index] = 0; // 该变元是确定的.
        }
        return var - k; // 自由变元有var - k个.
    }
    // 3. 唯一解的情况: 在var * (var + 1)的增广阵中形成严格的上三角阵.
    // 计算出Xn-1, Xn-2 ... X0.
    for (i = var - 1; i &gt;= 0; i--)
    {
        temp = a[i][var];
        for (j = i + 1; j &lt; var; j++)
        {
            if (a[i][j] != 0) temp -= a[i][j] * x[j];
        }
        if (temp % a[i][i] != 0) return -2; // 说明有浮点数解，但无整数解.
        x[i] = temp / a[i][i];
    }
    return 0;
}
int main(void)
{
    freopen(&quot;in.txt&quot;, &quot;r&quot;, stdin);
    freopen(&quot;out.txt&quot;,&quot;w&quot;,stdout);
    int i, j;
    int equ,var;
    while (scanf(&quot;%d %d&quot;, &amp;equ, &amp;var) != EOF)
    {
        memset(a, 0, sizeof(a));
        for (i = 0; i &lt; equ; i++)
        {
            for (j = 0; j &lt; var + 1; j++)
            {
                scanf(&quot;%d&quot;, &amp;a[i][j]);
            }
        }
//        Debug();
        int free_num = Gauss(equ,var);
        if (free_num == -1) printf(&quot;无解!\n&quot;);
   else if (free_num == -2) printf(&quot;有浮点数解，无整数解!\n&quot;);
        else if (free_num &gt; 0)
        {
            printf(&quot;无穷多解! 自由变元个数为%d\n&quot;, free_num);
            for (i = 0; i &lt; var; i++)
            {
                if (free_x[i]) printf(&quot;x%d 是不确定的\n&quot;, i + 1);
                else printf(&quot;x%d: %d\n&quot;, i + 1, x[i]);
            }
        }
        else
        {
            for (i = 0; i &lt; var; i++)
            {
                printf(&quot;x%d: %d\n&quot;, i + 1, x[i]);
            }
        }
        printf(&quot;\n&quot;);
    }
    return 0;
}</code></pre><p>可以解决的问题：</p>
<p>1.直接找出关系，列方程组求解</p>
<p>2. 开关问题</p>
<p>3. 解模线性方程组</p>
<p>浮点型</p>
<pre><code>const int maxn=1002;
const double eps=1e-12;
double a[maxn][maxn];
int equ,var;//equ个方程,var个变量
double x[maxn];//解集
bool free_x[maxn];
int n;

int sgn(double x)
{
    return (x&gt;eps)-(x&lt;-eps);
}
// 高斯消元法解方程组(Gauss-Jordan elimination).(0表示无解，1表示唯一解，大于1表示无穷解，并返回自由变元的个数)
int gauss()
{
    equ=n,var=n;//多少个方程，多少个变量
    int i,j,k;
    int max_r; // 当前这列绝对值最大的行.
    int col; // 当前处理的列.
    double temp;
    int free_x_num;
    int free_index;
    // 转换为阶梯阵.
    col=0; // 当前处理的列.
    memset(free_x,true,sizeof(free_x));
    for(k=0;k&lt;equ&amp;&amp;col&lt;var;k++,col++)
    {
        max_r=k;
        for(i=k+1;i&lt;equ;i++)
        {
            if(sgn(fabs(a[i][col])-fabs(a[max_r][col]))&gt;0)
                max_r=i;
        }
        if(max_r!=k)
        { // 与第k行交换.
            for(j=k;j&lt;var+1;j++)
                swap(a[k][j],a[max_r][j]);
        }
        if(sgn(a[k][col])==0)
        { // 说明该col列第k行以下全是0了，则处理当前行的下一列.
            k--; continue;
        }
        for(i=k+1;i&lt;equ;i++)
        { // 枚举要删去的行.
            if (sgn(a[i][col])!=0)
            {
                temp=a[i][col]/a[k][col];
                for(j=col;j&lt;var+1;j++)
                {
                    a[i][j]=a[i][j]-a[k][j]*temp;
                }
            }
        }
    }

    for(i=k;i&lt;equ;i++)
    {
        if (sgn(a[i][col])!=0)
            return 0;
    }
    if(k&lt;var)
    {
        for(i=k-1;i&gt;=0;i--)
        {
            free_x_num=0;
            for(j=0;j&lt;var;j++)
            {
                if (sgn(a[i][j])!=0&amp;&amp;free_x[j])
                    free_x_num++,free_index=j;
            }
            if(free_x_num&gt;1) continue;
            temp=a[i][var];
            for(j=0;j&lt;var;j++)
            {
                if(sgn(a[i][j])!=0&amp;&amp;j!=free_index)
                    temp-=a[i][j]*x[j];
            }
            x[free_index]=temp/a[i][free_index];
            free_x[free_index]=0;
        }
        return var-k;
    }

    for (i=var-1;i&gt;=0;i--)
    {
        temp=a[i][var];
        for(j=i+1;j&lt;var;j++)
        {
            if(sgn(a[i][j])!=0)
                temp-=a[i][j]*x[j];
        }
        x[i]=temp/a[i][i];
    }
    return 1;
}</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://tpaaaaaa.github.io/tpaaaaaa.github.io/2019/10/04/LightOJ-1170CountingPerfectBST/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="我玩维恩不学q">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/tpaaaaaa.github.io/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Tian's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/tpaaaaaa.github.io/2019/10/04/LightOJ-1170CountingPerfectBST/" itemprop="url">LightOJ - 1170 Counting Perfect BST</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-10-04T22:50:52+08:00">
                2019-10-04
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/tpaaaaaa.github.io/categories/%E6%95%B0%E8%AE%BA/" itemprop="url" rel="index">
                    <span itemprop="name">数论</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>BST is the acronym for Binary Search Tree. A BST is a tree data structure with the following properties.</p>
<p>i)        Each BST contains a root node and the root may have zero, one or two children. Each of the children themselves forms the root of another BST. The two children are classically referred to as left child and right child.</p>
<p>ii)      The left subtree, whose root is the left children of a root, contains all elements with key values less than or equal to that of the root.</p>
<p>iii)    The right subtree, whose root is the right children of a root, contains all elements with key values greater than that of the root.</p>
<p>An integer m is said to be a perfect power if there exists integer <strong>x &gt; 1</strong> and <strong>y &gt; 1</strong> such that <strong>m = xy</strong>. First few perfect powers are {4, 8, 9, 16, 25, 27, 32, 36, 49, 64, 81, 100, 121, 125, 128, 144, …}. Now given two integer <strong>a</strong> and <strong>b</strong> we want to construct BST using all perfect powers between <strong>a</strong> and <strong>b</strong>, where each perfect power will form the key value of a node.</p>
<p>Now, we can construct several BSTs out of the perfect powers. For example, given <strong>a = 1</strong> and <strong>b = 10</strong>, perfect powers between <strong>a</strong> and <strong>b</strong> are 4, 8, 9. Using these we can form the following five BSTs.</p>
<p><strong>4           4         8          9         9</strong></p>
<p>**  \          \      / \      /         /**</p>
<p>**    8          9   4     9   4         8**</p>
<p>**      \      /                 \      /**</p>
<pre><code>**9   8                     8   4**</code></pre><p>In this problem, given <strong>a</strong> and <strong>b</strong>, you will have to determine the total number of BSTs that can be formed using perfect powers between <strong>a</strong> and <strong>b</strong>.Input</p>
<p>Input starts with an integer <strong>T (**</strong>≤ 20000)**, denoting the number of test cases.</p>
<p>Each case of input contains two integers: <strong>a</strong> and <strong>b (1 ≤ a ≤ b ≤ 1010, b - a ≤ 106)</strong> as defined in the problem statement.Output</p>
<p>For each case, print the case number and the total number of distinct BSTs that can be formed by the perfect powers between <strong>a</strong> and <strong>b</strong>. Output the result modulo <strong>100000007</strong>.Sample Input</p>
<p>4</p>
<p>1 4</p>
<p>5 10</p>
<p>1 10</p>
<p>1 3Sample Output</p>
<p>Case 1: 1</p>
<p>Case 2: 2</p>
<p>Case 3: 5</p>
<p>Case 4: 0</p>
<h2 id="分析："><a href="#分析：" class="headerlink" title="分析："></a>分析：</h2><p>卡特兰数。</p>
<pre><code>问你n个不同的数，能够构成多少种不同的BST，这是一个卡特兰数。
设dp[n]为n个........
则dp[n] = dp[0]dp[n-1] + dp[1]dp[n-2] ... dp[n-1]dp[0]
满足这样的递推公式的数，就是卡特兰数
他有一个通项公式是
dp[n] = C(2n, n) - C(2n, n - 1)
化简一下就是 dp[n] = C(2n, n) / (n+1);</code></pre><p><strong>卡特兰数常见的应用：</strong></p>
<p>博客地址：<a href="https://blog.csdn.net/wookaikaiko/article/details/81105031" target="_blank" rel="noopener">https://blog.csdn.net/wookaikaiko/article/details/81105031</a></p>
<p> ** 1、进出栈问题**</p>
<p> <strong>2、二叉树构成问题</strong></p>
<p><strong>3、凸多边形的三角形划分</strong></p>
<p><strong>4、有n+1个叶子的满二叉树的个数？</strong></p>
<p><strong>5、在n*n的格子中，只在下三角行走，每次横或竖走一格，有多少中走法？</strong></p>
<p>** 6、将一个凸n+2边形区域分成三角形区域的方法数？**</p>
<p><strong>自己想出递归公式dp[n] = dp[0]dp[n-1] + dp[1]dp[n-2] … dp[n-1]dp[0]</strong></p>
<p><strong>然后辨析出他是卡特兰数，就可以用前人归纳的组合数来简化运算。</strong></p>
<h2 id="代码："><a href="#代码：" class="headerlink" title="代码："></a>代码：</h2><pre><code>#include &lt;iostream&gt;
#include &lt;cstring&gt;
#include &lt;cmath&gt;
#include &lt;cstdio&gt;
#include &lt;algorithm&gt;
#include &lt;set&gt;
using namespace std;
const int MAXN = 1e6 + 10;
const int MOD  = 100000007;
typedef long long ll;
ll pPow[MAXN], pn, dp[MAXN];
/*
    用筛选法，求出perfect power？？
    问你n个不同的数，能够构成多少种不同的BST，这是一个卡特兰数。
    设dp[n]为n个........
    则dp[n] = dp[0]dp[n-1] + dp[1]dp[n-2] ... dp[n-1]dp[0]
    满足这样的递推公式的数，就是卡特兰数
    他有一个通项公式是
    dp[n] = C(2n, n) - C(2n, n - 1)
    化简一下就是 dp[n] = C(2n, n) / (n+1);

    所以我们接下来的任务就是求出[a, b]之中的perfect powers的数目n了
    因为不超过1e10,所以开方后不超过1e5
    所以我们只需要枚举1e5的数，然后将这些数产生的perfect powers 存入即可
    然后再去重和排序
    lower_bound( begin,end,num) 大于或等于num的数字
    upper_bound                 大于
    对于任意(a,b)中的perfect power数，我们采用自带的二分
    pos1 = upper_bound(a);
    pos2 = upper_bound(b);
    n = pos2 - pos1;
    输出dp[n]即可
*/
//打表卡特兰数.
void init()
{
    ll temp;
    pn = 0;
    for(ll i = 2; i &lt;= 100000; i++)
    {
        ll temp = i * i;
        while(temp &lt;= 1e10)
        {
            pPow[++pn] = temp;
            temp *= i;
        }
    }
    sort(pPow, pPow + pn);
    pn = unique(pPow, pPow + pn) - pPow;
    //pn就是1e10中的perfect pow数的数目
    dp[0]  = 1;
    dp[1] = 1;
    for(int i = 2; i &lt; 1111; i++)
    {
        for(int j = 1; j &lt;= i; j++)
        {
            dp[i] += dp[j - 1] * dp[i - j];
            dp[i] %= MOD;
        }
    }
    dp[0] = 0; 
}
int getN(ll a, ll b)
{
    int pos1 = lower_bound(pPow, pPow + pn, a) - pPow;
    int pos2 = upper_bound(pPow, pPow + pn, b) - pPow;
    return pos2 - pos1;
}
int main()
{
    init();
    int t;
    cin &gt;&gt; t;
    ll a, b;
    for(int kase = 1; kase &lt;= t; kase ++)
    {
        scanf(&quot;%lld%lld&quot;, &amp;a, &amp;b);
        int n = getN(a, b);
        printf(&quot;Case %d: %lld\n&quot;, kase, dp[n]);
    }
}</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://tpaaaaaa.github.io/tpaaaaaa.github.io/2019/10/04/LightOJ-1117HelpingCicada/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="我玩维恩不学q">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/tpaaaaaa.github.io/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Tian's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/tpaaaaaa.github.io/2019/10/04/LightOJ-1117HelpingCicada/" itemprop="url">LightOJ - 1117 Helping Cicada</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-10-04T22:38:15+08:00">
                2019-10-04
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/tpaaaaaa.github.io/categories/%E6%95%B0%E8%AE%BA/" itemprop="url" rel="index">
                    <span itemprop="name">数论</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Cicada is an insect with large transparent eyes and well-veined wings similar to the “jar flies”. The insects are thought to have evolved 1.8 million years ago during the Pleistocene epoch. There are about 2,500 species of cicada around the world which live in temperate tropical climates.</p>
<p>These are all sucking insects, which pierce plants with their pointy mouthparts and suck out the juices. But there are some predators (like birds, the Cicada Killer Wasp) that attack cicadas. Each of the predators has a periodic cycle of attacking Cicadas. For example, birds attack them every three years; wasps attack them every 2 years. So, if Cicadas come in the 12th year, then birds or wasps can attack them. If they come out in the 7th year then no one will attack them.</p>
<p>So, at first they will choose a number <strong>N</strong> which represents possible life-time. Then there will be an integer <strong>M</strong> indicating the total number of predators. The next <strong>M</strong> integers represent the life-cycle of each predator. The numbers in the range from <strong>1</strong> to <strong>N</strong> which are not divisible by any of those <strong>M</strong>life-cycles numbers will be considered for cicada’s safe-emerge year. And you want to help them.Input</p>
<p>Input starts with an integer <strong>T (**</strong>≤ 125)**, denoting the number of test cases.</p>
<p>Each case contains two integers <strong>N (1 ≤ N &lt; 231)</strong> and <strong>M (1 ≤ M ≤ 15)</strong>. The next line contains <strong>M</strong>positive integers (fits into <strong>32</strong> bit signed integer) denoting the life cycles of the predators.Output</p>
<p>For each test case, print the case number and the number of safe-emerge days for cicada.Sample Input</p>
<p>2</p>
<p>15 3</p>
<p>2 3 5</p>
<p>10 4</p>
<p>2 4 5 7Sample Output</p>
<p>Case 1: 4</p>
<p>Case 2: 3</p>
<h2 id="分析："><a href="#分析：" class="headerlink" title="分析："></a>分析：</h2><p>我们知道[1..N] 中能够被k整除的数的数目为 N/k 向下取整 因此可以利用容斥定理</p>
<p>容斥定理部分：</p>
<pre><code>for(int i = 1; i &lt; (1 &lt;&lt; m); i++)
{
    ll LCM = 1;
    int cnt = 0;            //记录是多少个数的LCM，如果是奇数则减，偶数则加
    for(int j = 0; j &lt; m; j++)
    {
        if(i &amp; (1 &lt;&lt; j))
        {
            cnt ++;
            LCM = lcm(LCM, a[j + 1]);
        }
    }
    if(cnt &amp; 1)
        ans += n / LCM;
    else
        ans -= n / LCM;
}</code></pre><h2 id="代码："><a href="#代码：" class="headerlink" title="代码："></a>代码：</h2><pre><code>/*
Date              : 2019-10-04    13:22:05
By                : Tpaaaaaa
File_Name         ：LightOJ1117HelpingCicada.cpp
Description       : 
目前正在专项刷题，为了保证效果。
必须做到：
   1，先想出完整思路，并分析复杂度。
   2. 按照自己的思路过一遍样例，自己编几个复杂的样例
   3. 编写代码的时候，规范风格（例如变量名）
   4. 模块化答题

我们知道[1..N] 中能够被k整除的数的数目为 N/k 向下取整  因此可以利用容斥定理

*/
#include&lt;functional&gt;
#include&lt;cstdio&gt;
#include&lt;cstring&gt;
#include&lt;algorithm&gt;
#include&lt;iostream&gt;
#include&lt;string&gt;
#include&lt;vector&gt;
#include&lt;stack&gt;
#include&lt;bitset&gt;
#include&lt;cstdlib&gt;
#include&lt;cmath&gt;
#include&lt;set&gt;
#include&lt;list&gt;
#include&lt;deque&gt;
#include&lt;map&gt;
#include&lt;queue&gt;
#define md(x, y)  (x + y) / 2
#define ls(x)      x &lt;&lt; 1
#define rs(x)      x &lt;&lt; 1 | 1
#define fileopen freopen(&quot;in.txt&quot;, &quot;r&quot;, stdin); freopen(&quot;out.txt&quot;, &quot;w&quot;, stdout)
#define fileclose fclose(stdin); fclose(stdout)
using namespace std;
typedef long long ll;
const double PI = acos(-1.0);
const double eps = 1e-6;
const int INF = 0x3f3f3f3f;
const int MAXN = 20;
ll a[MAXN];
ll gcd(ll a, ll b)
{
    if(b == 0)  return a;
    return      gcd(b, a%b);
}
ll lcm(ll a, ll b)
{
    return a / gcd(a, b) * b;
}
int main()
{
   int t, m;
   ll n;
   cin &gt;&gt;t;
   for(int kase = 1; kase &lt;= t; kase ++)
   {
        scanf(&quot;%lld%d&quot;, &amp;n, &amp;m);
        for(int i = 1; i &lt;= m; i++)
            scanf(&quot;%lld&quot;, &amp;a[i]);
        ll ans = 0;
        //状态压缩
        //ans记录的是被吃的日子
        //n - ans 就是答案了
        for(int i = 1; i &lt; (1 &lt;&lt; m); i++)
        {
            ll LCM = 1;
            int cnt = 0;            //记录是多少个数的LCM，如果是奇数则减，偶数则加
            for(int j = 0; j &lt; m; j++)
            {
                if(i &amp; (1 &lt;&lt; j))
                {
                    cnt ++;
                    LCM = lcm(LCM, a[j + 1]);
                }
            }
            if(cnt &amp; 1)
                ans += n / LCM;
            else
                ans -= n / LCM;
        }
        printf(&quot;Case %d: %lld\n&quot;, kase, n - ans);
   }
   return 0;
}</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://tpaaaaaa.github.io/tpaaaaaa.github.io/2019/10/04/LightOJ-1124CricketRanking/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="我玩维恩不学q">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/tpaaaaaa.github.io/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Tian's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/tpaaaaaa.github.io/2019/10/04/LightOJ-1124CricketRanking/" itemprop="url">LightOJ - 1124 Cricket Ranking</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-10-04T22:35:44+08:00">
                2019-10-04
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/tpaaaaaa.github.io/categories/%E6%95%B0%E8%AE%BA/" itemprop="url" rel="index">
                    <span itemprop="name">数论</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>World Cup Cricket 2011 is coming. Many of you may not be interested in cricket, but it’s really a passion in our subcontinent. Ranking of cricketers is a common phenomenon there. Cricketers are ranked by their performance in both form of cricket (Test and One-day). People really enjoy this ranking. They like to see their favorite players as top ranked. Currently many such rankings are available. And as you have guessed, each ranking makes a different player as top ranked.</p>
<p>World Cup committee has decided that they will make a new ranking on the performance of players in the world cup. They want the ranking to be acceptable to the public. The rules are:</p>
<p>1)  There are <strong>K</strong> different departments. Cricketers will be given points in each department depending on their performance.</p>
<p>2)  The maximum points for each department are not equal. Such as Sakib Al Hasan can get maximum 25 points in batting but Mushfiqur Rahim can get maximum 10 points for his spectacular wicket keeping.</p>
<p>3)  The sum of maximum points of all departments will be exactly <strong>N</strong> points. And the final ranking will depend on the total earned points out of <strong>N</strong> points.</p>
<p>The ranking committee wants popular cricketers to get top ranked. To do so, they even allow maximum points for fielding more than that of batting. But that can bring lots of criticism. So they decide to fix a range of points for each department. Such as maximum points for batting will be at least 10 and at most 15 or for fielding, it will be at least 8 and at most 12. But the total points will be 20. Then 3 ranking systems are possible, such as: (10, 10), (11, 9) and (12, 8) for batting and fielding respectively. In this problem, you have to find the number of ranking systems possible for given number of departments, range of points for each department and total points.Input</p>
<p>Input starts with an integer <strong>T (**</strong>≤ 100)**, denoting the number of test cases.</p>
<p>Each case starts with a blank line and two integers <strong>K (1 ≤ K ≤ 10)</strong> and <strong>N (1 ≤ N ≤ 106)</strong>. Each of the next <strong>K</strong> lines denotes the lower and upper limit of allowable maximum points for each department. These integers will be in the range <strong>[0, 106]</strong>. And the lower limit of each department will always be less than or equal to the upper limit of that department.Output</p>
<p>For each case, print the case number and the number of rankings possible modulo <strong>100000007</strong>.Sample Input</p>
<p>4</p>
<p>4 10</p>
<p>1 1</p>
<p>2 2</p>
<p>3 3</p>
<p>4 4</p>
<p>4 10</p>
<p>1 1</p>
<p>2 2</p>
<p>3 3</p>
<p>3 3</p>
<p>2 10</p>
<p>1 10</p>
<p>1 10</p>
<p>2 20</p>
<p>10 15</p>
<p>8 12</p>
<p>Sample Output</p>
<p>Case 1: 1</p>
<p>Case 2: 0</p>
<p>Case 3: 9</p>
<p>Case 4: 3</p>
<h2 id="分析："><a href="#分析：" class="headerlink" title="分析："></a>分析：</h2><p>题目大意：给你n个区间，在每个区间里面取一个值，使得这n个值的和为s</p>
<p><strong>隔板法的应用（变量取值有下限）</strong></p>
<p><strong>一般问题1</strong></p>
<p>x1 + x2 + x3 + …. + xn = s 的整数解的组合数。其中xi 至少为1</p>
<p>这就可以用隔板法, s 个 元素，就有 s - 1 个空隙，我们要将s个元素分成n部分，每部分最少为1，则需要往其中插入n - 1 个 隔板，所以组合数为C(s - 1, n - 1);</p>
<p><strong>一般问题2</strong></p>
<p>x1 + x2 + x3 + …. + xn = s 的整数解的组合数。其中xi 至少为0</p>
<p>这就可以用隔板法, 我们要将s个元素分成n部分，每部分最少为0，则需要往其中再添加n个元素，所以我们的任务是将s + n个元素分成 n 部分，每部分最少为1，所以组合数为C(s + n - 1, n - 1);</p>
<p><strong>一般问题3</strong></p>
<p>x1 + x2 + x3 + …. + xn = s 的整数解的组合数。其中 x[i] 至少为 v[i].</p>
<p>我们可以设法将这类问题转化为我们已知组合数的一般问题2和一般问题1.</p>
<p>我们设新的x[i]</p>
<p>得到方程</p>
<p>(x[1] + v[1]) + (x[2] + v[2]) + …. + (x[n] + v[n]) = s;</p>
<p>然后再将v[i] 全部移到左边，得到新的 s = s - v[1] - v[2] … - v[n]</p>
<p>所以得到新的式子</p>
<p>x[1] + x[2] + .. + x[n] = s 其中x[i] 至少为0. 变化为一般问题2了.</p>
<p>对于本题，<strong>变量的取值是额外有上限的</strong>。 正难则反，我们则考虑超过上限的组合数，然后用总的组合数减去它即可 <strong>记得要搭配上容斥定理哟</strong>， 就转化为一般问题3了。</p>
<p><strong>卢卡斯定理（组合数取模）：</strong></p>
<pre><code>//返回a^b次模MOD
ll qpow(ll a, ll b)
{
    ll ans = 1;
    while(b)
    {
        if(b &amp; 1)   
            ans = (ans * a) % MOD;
        a = (a * a) % MOD;
        b &gt;&gt;= 1;
    }
    return ans;
}
// 返回x模MOD的逆元
ll inv(ll x)
{
    return qpow(x, MOD - 2);
}
// 返回组合数C(a, b)
ll C(ll a, ll b)
{
    if(a &lt; b) return 0;
    ll up = 1, down = 1;    //分子分母
    for(int i = a - b + 1; i &lt;= a; i++)
        up = up * i % MOD;
    for(int i = 1; i &lt;= b; i++)
        down = down * i % MOD;
    return up * inv(down) % MOD;
}
ll lucas(ll a, ll b)
{
    if(b == 0)  return 1;
    return C(a % MOD, b % MOD) * lucas(a / MOD, b / MOD) % MOD;
}</code></pre><p><strong>容斥定理部分</strong></p>
<pre><code>for(int i = 1; i &lt; (1 &lt;&lt; n); i++)
{
    int cnt = 0;
    ll temp = s;
    for(int j = 0; j &lt; n; j++)
    {
        if(i &amp; (1 &lt;&lt; j))
        {
            cnt ++;             //记录超过界限的数目
            temp -= v[j] + 1;   //减去他。
        }
    }
    if(temp &lt; 0) continue;      //非法
    ans += f[cnt &amp; 1] * lucas(temp + n - 1, n - 1);
    ans = (ans % MOD + MOD) % MOD; 
}</code></pre><h2 id="代码："><a href="#代码：" class="headerlink" title="代码："></a>代码：</h2><pre><code>/*
Date              : 2019-10-04    13:48:37
By                : Tpaaaaaa
File_Name         ：Cricket Ranking LightOJ - 1124 .cpp
Description       : 
目前正在专项刷题，为了保证效果。
必须做到：
   1，先想出完整思路，并分析复杂度。
   2. 按照自己的思路过一遍样例，自己编几个复杂的样例
   3. 编写代码的时候，规范风格（例如变量名）
   4. 模块化答题
给你n个区间，在每个区间里面取一个值，使得这n个值的和为s
x1 + x2 + x3 + ... + xn = s;
x1 属于[l1, r1], x2 属于[l2, r2] .....
我们左右减去l1 + l2 ... + ln
得到新的式子
x1 + x2 + x3 + ... + xn = s;
其中x1 属于[0, r1 - l1] .....
如果x是非负整数的话，排列数就是C(s + n - 1, n - 1);
但是要减去超过每个变量上限的数目。
这就要用到容斥定理了
减去超过一个过界的数目，加上两个过界的数目....
用状态压缩的方法来枚举。
*/
#include&lt;functional&gt;
#include&lt;cstdio&gt;
#include&lt;cstring&gt;
#include&lt;algorithm&gt;
#include&lt;iostream&gt;
#include&lt;string&gt;
#include&lt;vector&gt;
#include&lt;stack&gt;
#include&lt;bitset&gt;
#include&lt;cstdlib&gt;
#include&lt;cmath&gt;
#include&lt;set&gt;
#include&lt;list&gt;
#include&lt;deque&gt;
#include&lt;map&gt;
#include&lt;queue&gt;
#define md(x, y)  (x + y) / 2
#define ls(x)      x &lt;&lt; 1
#define rs(x)      x &lt;&lt; 1 | 1
#define fileopen freopen(&quot;in.txt&quot;, &quot;r&quot;, stdin); freopen(&quot;out.txt&quot;, &quot;w&quot;, stdout)
#define fileclose fclose(stdin); fclose(stdout)
using namespace std;
typedef long long ll;
const double PI = acos(-1.0);
const double eps = 1e-6;
const int INF = 0x3f3f3f3f;
const int MAXN = 1e6 + 100;
const int MOD = 100000007; 
ll v[MAXN]; 
ll n, s;
//返回a^b次模MOD
ll qpow(ll a, ll b)
{
    ll ans = 1;
    while(b)
    {
        if(b &amp; 1)   
            ans = (ans * a) % MOD;
        a = (a * a) % MOD;
        b &gt;&gt;= 1;
    }
    return ans;
}
// 返回x模MOD的逆元
ll inv(ll x)
{
    return qpow(x, MOD - 2);
}
// 返回组合数C(a, b)
ll C(ll a, ll b)
{
    if(a &lt; b) return 0;
    ll up = 1, down = 1;    //分子分母
    for(int i = a - b + 1; i &lt;= a; i++)
        up = up * i % MOD;
    for(int i = 1; i &lt;= b; i++)
        down = down * i % MOD;
    return up * inv(down) % MOD;
}
ll lucas(ll a, ll b)
{
    if(b == 0)  return 1;
    return C(a % MOD, b % MOD) * lucas(a / MOD, b / MOD) % MOD;
}
ll solve()
{
    ll ans = lucas(s + n - 1, n - 1);
    int f[2] = {1, -1};
    for(int i = 1; i &lt; (1 &lt;&lt; n); i++)
    {
        int cnt = 0;
        ll temp = s;
        for(int j = 0; j &lt; n; j++)
        {
            if(i &amp; (1 &lt;&lt; j))
            {
                cnt ++;             //记录超过界限的数目
                temp -= v[j] + 1;   //减去他。
            }

        }
        if(temp &lt; 0) continue;      //非法
        ans += f[cnt &amp; 1] * lucas(temp + n - 1, n - 1);
        ans = (ans % MOD + MOD) % MOD; 
    }
    return ans;
}
int main()
{
   int t;
   cin &gt;&gt;t;
   for(int kase = 1; kase &lt;= t; kase ++)
   {
       //n个区间，和为s
       scanf(&quot;%lld%lld&quot;, &amp;n, &amp;s);
       for(int i = 0; i &lt; n; i++)
       {
           ll l, r;
           scanf(&quot;%lld%lld&quot;, &amp;l, &amp;r);
           r -= l;
           s -= l;
           v[i] = r;                //v[i]就是该变量的上界
       }
       printf(&quot;Case %d: %lld\n&quot;, kase, solve());
   }
   return 0;
}</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://tpaaaaaa.github.io/tpaaaaaa.github.io/2019/10/04/LightOJ-1028TrailingZeroes(I)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="我玩维恩不学q">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/tpaaaaaa.github.io/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Tian's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/tpaaaaaa.github.io/2019/10/04/LightOJ-1028TrailingZeroes(I)/" itemprop="url">LightOJ - 1028 Trailing Zeroes (I)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-10-04T22:14:05+08:00">
                2019-10-04
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/tpaaaaaa.github.io/categories/%E6%95%B0%E8%AE%BA/" itemprop="url" rel="index">
                    <span itemprop="name">数论</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>We know what a base of a number is and what the properties are. For example, we use decimal number system, where the base is <strong>10</strong> and we use the symbols - <strong>{0, 1, 2, 3, 4, 5, 6, 7, 8, 9}</strong>. But in different bases we use different symbols. For example in binary number system we use only <strong>0</strong> and <strong>1</strong>. Now in this problem, you are given an integer. You can convert it to any base you want to. But the condition is that if you convert it to any base then the number in that base should have at least one trailing zero that means a zero at the end.</p>
<p>For example, in decimal number system <strong>2</strong> doesn’t have any trailing zero. But if we convert it to binary then <strong>2</strong> becomes <strong>(10)2</strong> and it contains a trailing zero. Now you are given this task. You have to find the number of bases where the given number contains at least one trailing zero. You can use any base from two to infinite.Input</p>
<p>Input starts with an integer <strong>T (**</strong>≤ 10000)**, denoting the number of test cases.</p>
<p>Each case contains an integer <strong>N (1 ≤ N ≤ 1012)</strong>.Output</p>
<p>For each case, print the case number and the number of possible bases where <strong>N</strong> contains at least one trailing zero.Sample Input</p>
<p>3</p>
<p>9</p>
<p>5</p>
<p>2Sample Output</p>
<p>Case 1: 2</p>
<p>Case 2: 1</p>
<p>Case 3: 1</p>
<p>Note</p>
<p>For <strong>9</strong>, the possible bases are: <strong>3</strong> and <strong>9</strong>. Since in base <strong>3</strong>; <strong>9</strong> is represented as <strong>100</strong>, and in base <strong>9</strong>; <strong>9</strong> is represented as <strong>10</strong>. In both bases, <strong>9</strong> contains a trailing zero.</p>
<h2 id="分析："><a href="#分析：" class="headerlink" title="分析："></a>分析：</h2><p>经过分析可知，实际上求的是n的除去1的因子数。所以可以用唯一分解定理求解因子数，减1就是答案了。</p>
<p>辨析两个概念</p>
<p>因子和因数很相似，但有区别。<br>因子不包括数本身<br>因数包括<br><strong>如10的因子是1，2，5</strong><br><strong>因数是1，2，5，10</strong></p>
<p>唯一分解定理求的是因数的数目.</p>
<h2 id="代码："><a href="#代码：" class="headerlink" title="代码："></a>代码：</h2><pre><code>/*
Date              : 2019-10-04    20:11:04
By                : Tpaaaaaa
File_Name         ：Trailing Zeroes (I) LightOJ - 1028 .cpp
Description       : 
目前正在专项刷题，为了保证效果。
必须做到：
   1，先想出完整思路，并分析复杂度。
   2. 按照自己的思路过一遍样例，自己编几个复杂的样例
   3. 编写代码的时候，规范风格（例如变量名）
   4. 模块化答题

*/
#include&lt;functional&gt;
#include&lt;cstdio&gt;
#include&lt;cstring&gt;
#include&lt;algorithm&gt;
#include&lt;iostream&gt;
#include&lt;string&gt;
#include&lt;vector&gt;
#include&lt;stack&gt;
#include&lt;bitset&gt;
#include&lt;cstdlib&gt;
#include&lt;cmath&gt;
#include&lt;set&gt;
#include&lt;list&gt;
#include&lt;deque&gt;
#include&lt;map&gt;
#include&lt;queue&gt;
#define md(x, y)  (x + y) / 2
#define ls(x)      x &lt;&lt; 1
#define rs(x)      x &lt;&lt; 1 | 1
#define fileopen freopen(&quot;in.txt&quot;, &quot;r&quot;, stdin); freopen(&quot;out.txt&quot;, &quot;w&quot;, stdout)
#define fileclose fclose(stdin); fclose(stdout)
using namespace std;
typedef long long ll;
const double PI = acos(-1.0);
const double eps = 1e-6;
const int INF = 0x3f3f3f3f;
const int MAXN = 1e6 + 10;
bool Isprime[MAXN];
ll prime[MAXN];
int top;
void init()
{
    memset(Isprime, true, sizeof Isprime);
    Isprime[1] = false;
    top = 0;
    for(ll i = 2; i &lt; MAXN; i++)
    {
        if(Isprime[i])
        {
            prime[++top] = i;
            for(ll j = i * i; j &lt; MAXN; j += i)
                Isprime[j] = false;
        }
    }
}
//唯一分解定理可以求因子数和因子和
ll solve(ll n)
{
    ll sum = 1;
    for(int i = 1; i &lt;= top &amp;&amp; prime[i] * prime[i] &lt;= n; i++)
    {
        if(n % prime[i] == 0)
        {
            int temp = 0;           //指数
            while(n % prime[i] == 0)
            {
                temp ++;
                n = n / prime[i];
            }
            sum *= 1 + temp;
        }

    }
    if(n &gt; 1)
        sum *= 2;
    return sum;
}
int main()
{
   int t;
   init();
   ll n;
   cin &gt;&gt; t;
   for(int kase = 1; kase &lt;= t; kase++)
   {
       scanf(&quot;%lld&quot;, &amp;n);
       printf(&quot;Case %d: %lld\n&quot;, kase, solve(n) - 1);
   }
   return 0;
}</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://tpaaaaaa.github.io/tpaaaaaa.github.io/2019/10/03/LightOJ-1058ParallelogramCounting/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="我玩维恩不学q">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/tpaaaaaa.github.io/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Tian's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/tpaaaaaa.github.io/2019/10/03/LightOJ-1058ParallelogramCounting/" itemprop="url">LightOJ - 1058 Parallelogram Counting</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-10-03T22:37:21+08:00">
                2019-10-03
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/tpaaaaaa.github.io/categories/%E6%95%B0%E8%AE%BA/" itemprop="url" rel="index">
                    <span itemprop="name">数论</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>There are <strong>n</strong> distinct points in the plane, given by their integer coordinates. Find the number of parallelograms whose vertices lie on these points. In other words, find the number of 4-element subsets of these points that can be written as <strong>{A, B, C, D}</strong> such that <strong>AB || CD</strong>, and <strong>BC || AD</strong>. No four points are in a straight line.Input</p>
<p>Input starts with an integer <strong>T (**</strong>≤ 15)**, denoting the number of test cases.</p>
<p>The first line of each test case contains an integer <strong>n (1 ≤ n ≤ 1000)</strong>. Each of the next <strong>n</strong> lines, contains <strong>2</strong> space-separated integers <strong>x</strong> and <strong>y</strong> (the coordinates of a point) with magnitude (absolute value) of no more than <strong>1000000000</strong>.Output</p>
<p>For each case, print the case number and the number of parallelograms that can be formed.Sample Input</p>
<p>2</p>
<p>6</p>
<p>0 0</p>
<p>2 0</p>
<p>4 0</p>
<p>1 1</p>
<p>3 1</p>
<p>5 1</p>
<p>7</p>
<p>-2 -1</p>
<p>8 9</p>
<p>5 7</p>
<p>1 1</p>
<p>4 8</p>
<p>2 0</p>
<p>9 8Sample Output</p>
<p>Case 1: 5</p>
<p>Case 2: 6</p>
<h2 id="分析："><a href="#分析：" class="headerlink" title="分析："></a>分析：</h2><p>平行四边形存在定理。</p>
<p>两根线段的中点在同一个位置，那么这两个线段就能组成一个平行四边形的一对对角线。</p>
<h2 id="代码："><a href="#代码：" class="headerlink" title="代码："></a>代码：</h2><pre><code>/*
 Date              : 2019-10-03-12.58.48
 By                : Tpaaaaaa
 Question_Number   ：Parallelogram Counting LightOJ - 1058
 Question_Name     ：简单数学
 Description       :
 目前正在专项刷题，为了保证效果。
必须做到：
    1，先想出完整思路，并分析复杂度。
    2. 按照自己的思路过一遍样例，自己编几个复杂的样例
    3. 编写代码的时候，规范风格（例如变量名）
    4. 模块化答题

求出每个线段的中点，然后按照中点排序
对于有着相同中点的两个线段，可以组成一个平行四边形
因此我们得到每个中点所在的线段数
在这些线段中任意取两个即可
即C(n,2)
*/
#include&lt;functional&gt;
#include&lt;cstdio&gt;
#include&lt;cstring&gt;
#include&lt;algorithm&gt;
#include&lt;iostream&gt;
#include&lt;string&gt;
#include&lt;vector&gt;
#include&lt;stack&gt;
#include&lt;bitset&gt;
#include&lt;cstdlib&gt;
#include&lt;cmath&gt;
#include&lt;set&gt;
#include&lt;list&gt;
#include&lt;deque&gt;
#include&lt;map&gt;
#include&lt;queue&gt;
#define md(x, y)  (x + y) / 2
#define ls(x)      x &lt;&lt; 1
#define rs(x)      x &lt;&lt; 1 | 1
using namespace std;
typedef long long ll;
const double PI = acos(-1.0);
const double eps = 1e-6;
const int INF = 0x3f3f3f3f;
const int MAXN = 1e3 + 10;
struct Poi
{
    int x, y;
    friend bool operator &lt; (Poi A, Poi B)
    {
        if(A.x == B.x)  return A.y &lt; B.y;
        else            return A.x &lt; B.x;
    }
};
Poi poi[MAXN];
Poi mid[MAXN*MAXN];
int main()
{
    int t;
    int n;
    cin &gt;&gt; t;
    for(int kase = 1; kase &lt;= t; kase ++)
    {
        scanf(&quot;%d&quot;, &amp;n);
        for(int i = 1; i &lt;= n; i++)
            scanf(&quot;%d%d&quot;, &amp;poi[i].x, &amp;poi[i].y);
        int ind = 0;
        for(int i = 1; i &lt; n; i++)
            for(int j = i + 1; j &lt;= n; j++)
            {
                ind++;
                mid[ind].x = (poi[i].x + poi[j].x) ;        //有点东西哦
                mid[ind].y = (poi[i].y + poi[j].y) ;
            }
        sort(mid + 1, mid + 1 + ind);
        int cnt = 1;
        ll ans = 0;
        for(int i = 1; i &lt; ind; i++)
        {
            if(mid[i].x == mid[i + 1].x &amp;&amp; mid[i].y == mid[i + 1].y)
            {
                cnt ++;                                             //记录的是同一中点的数目
            }
            else
            {
                ans += cnt*(cnt - 1) / 2;
                cnt  = 1;
            }
        }
        printf(&quot;Case %d: %lld\n&quot;, kase, ans);
    }
    return 0;
}</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://tpaaaaaa.github.io/tpaaaaaa.github.io/2019/10/03/LightOJ-1067Combinations/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="我玩维恩不学q">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/tpaaaaaa.github.io/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Tian's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/tpaaaaaa.github.io/2019/10/03/LightOJ-1067Combinations/" itemprop="url">LightOJ - 1067 Combinations</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-10-03T22:35:44+08:00">
                2019-10-03
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/tpaaaaaa.github.io/categories/%E6%95%B0%E8%AE%BA/" itemprop="url" rel="index">
                    <span itemprop="name">数论</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Given <strong>n</strong> different objects, you want to take <strong>k</strong> of them. How many ways to can do it?</p>
<p>For example, say there are 4 items; you want to take 2 of them. So, you can do it 6 ways.</p>
<p><strong>Take 1, 2</strong></p>
<p><strong>Take 1, 3</strong></p>
<p><strong>Take 1, 4</strong></p>
<p><strong>Take 2, 3</strong></p>
<p><strong>Take 2, 4</strong></p>
<p><strong>Take 3, 4</strong>Input</p>
<p>Input starts with an integer <strong>T (**</strong>≤ 2000)**, denoting the number of test cases.</p>
<p>Each test case contains two integers <strong>n (1 ≤ n ≤ 106), k (0 ≤ k ≤ n)</strong>.Output</p>
<p>For each case, output the case number and the desired value. Since the result can be very large, you have to print the result modulo <strong>1000003</strong>.Sample Input</p>
<p>3</p>
<p>4 2</p>
<p>5 0</p>
<p>6 4Sample Output</p>
<p>Case 1: 6</p>
<p>Case 2: 1</p>
<p>Case 3: 15</p>
<h2 id="分析："><a href="#分析：" class="headerlink" title="分析："></a>分析：</h2><p>组合数取模的模板题。</p>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码:"></a>代码:</h2><pre><code>/*
 Date              : 2019-10-03-13.16.39
 By                : Tpaaaaaa
 Question_Number   ：Combinations LightOJ - 1067
 Question_Name     ：排列组合
 Description       :
 目前正在专项刷题，为了保证效果。
必须做到：
    1，先想出完整思路，并分析复杂度。
    2. 按照自己的思路过一遍样例，自己编几个复杂的样例
    3. 编写代码的时候，规范风格（例如变量名）
    4. 模块化答题

般对于大组合数取模，a,b不大于10^5的话，
用逆元的方法，可以解决。
对于a,b大于10^5的话，要求p&lt;10^5，
这样就是Lucas定理了，将a,b转化到10^5以内解。
而这题a,b,p虽然都大于10^5，但也没有大太多，
依然可以用Lucas定理来解决，以下就是AC代码。

解这种组合数取模的题目
有两种解法，一种是用数论的逆
另一种是卢卡斯定理

打表的方法：阶乘表，逆元表
费马小定理
*/
#include&lt;functional&gt;
#include&lt;cstdio&gt;
#include&lt;cstring&gt;
#include&lt;algorithm&gt;
#include&lt;iostream&gt;
#include&lt;string&gt;
#include&lt;vector&gt;
#include&lt;stack&gt;
#include&lt;bitset&gt;
#include&lt;cstdlib&gt;
#include&lt;cmath&gt;
#include&lt;set&gt;
#include&lt;list&gt;
#include&lt;deque&gt;
#include&lt;map&gt;
#include&lt;queue&gt;
#define md(x, y)  (x + y) / 2
#define ls(x)      x &lt;&lt; 1
#define rs(x)      x &lt;&lt; 1 | 1
using namespace std;
typedef long long ll;
const double PI = acos(-1.0);
const double eps = 1e-6;
const int INF = 0x3f3f3f3f;
const int MAXN = 1e6 + 100;
ll fac[MAXN];                                               //改了这里
ll ni[MAXN], ans;
#define mod 1000003
//求的是x的k次方
ll qpow(ll x,int k)
{
    ll ans = 1;
    while(k)
    {
        if(k&amp;1)
            ans = (ans*x)%mod;
        x = (x*x)%mod;
        k &gt;&gt;= 1;
    }
    return ans;
}
//打表的方法，阶乘表，逆元表哦
void init()
{
    fac[0] = 1; //存的是阶乘模mod
    ni[0] = 1;  //在存的是这个阶乘的值对模的逆元表
    for(int i = 1; i &lt; MAXN; i++)   //????????EXM？？？？？？？？？改了这里
    {
        //显然mod 与 pri互质
        //因为mod是素数，显然互素。
        fac[i] = fac[i-1] * i % mod;
        //printf(&quot;fac[i] = %d\n&quot;, fac[i]);
        //qpow是快速幂取模
        ni[i] = qpow(fac[i], mod - 2);
    }
}
int main()
{
    init();
    int t, n, k;
    cin &gt;&gt;t;
    for(int kase = 1; kase &lt;= t; kase ++)
    {
        scanf(&quot;%d%d&quot;, &amp;n, &amp;k);
        ans = ((fac[n]*ni[k]%mod)*ni[n-k])%mod;
        printf(&quot;Case %d: %lld\n&quot;, kase, ans);
    }
    return 0;
}</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
 <nav class="pagination">
   <a class="extend prev" rel="prev" href="/tpaaaaaa.github.io/page/9/"><i class="fa fa-angle-left" aria-label="accessibility.prev_page"></i></a><a class="page-number" href="/tpaaaaaa.github.io/">1</a><span class="space">&hellip;</span><a class="page-number" href="/tpaaaaaa.github.io/page/9/">9</a><span class="page-number current">10</span><a class="page-number" href="/tpaaaaaa.github.io/page/11/">11</a><span class="space">&hellip;</span><a class="page-number" href="/tpaaaaaa.github.io/page/25/">25</a><a class="extend next" rel="next" href="/tpaaaaaa.github.io/page/11/"><i class="fa fa-angle-right" aria-label="accessibility.next_page"></i></a>
 </nav>

          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/tpaaaaaa.github.io/images/avatar.gif"
                alt="我玩维恩不学q" />
            
              <p class="site-author-name" itemprop="name">我玩维恩不学q</p>
              <p class="site-description motion-element" itemprop="description">个人blog</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/tpaaaaaa.github.io/archives">
              
                  <span class="site-state-item-count">245</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/tpaaaaaa.github.io/categories/index.html">
                  <span class="site-state-item-count">12</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tpaaaaaa.github.io/tags/index.html">
                  <span class="site-state-item-count">113</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">我玩维恩不学q</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/tpaaaaaa.github.io/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/tpaaaaaa.github.io/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/tpaaaaaa.github.io/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/tpaaaaaa.github.io/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/tpaaaaaa.github.io/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/tpaaaaaa.github.io/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/tpaaaaaa.github.io/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/tpaaaaaa.github.io/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/tpaaaaaa.github.io/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/tpaaaaaa.github.io/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/tpaaaaaa.github.io/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/tpaaaaaa.github.io/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

</body>
</html>
