<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/tpaaaaaa.github.io/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/tpaaaaaa.github.io/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/tpaaaaaa.github.io/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/tpaaaaaa.github.io/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/tpaaaaaa.github.io/images/favicon.ico?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/tpaaaaaa.github.io/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/tpaaaaaa.github.io/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="个人blog">
<meta property="og:type" content="website">
<meta property="og:title" content="Tian&#39;s Blog">
<meta property="og:url" content="https:&#x2F;&#x2F;tpaaaaaa.github.io&#x2F;page&#x2F;23&#x2F;index.html">
<meta property="og:site_name" content="Tian&#39;s Blog">
<meta property="og:description" content="个人blog">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/tpaaaaaa.github.io/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://tpaaaaaa.github.io/page/23/"/>





  <title>Tian's Blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/tpaaaaaa.github.io/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Tian's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">对未来真正的慷慨，在于把一切都献给现在.</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/tpaaaaaa.github.io/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/tpaaaaaa.github.io/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tpaaaaaa.github.io/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/tpaaaaaa.github.io/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            Categories
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" target="_blank" rel="noopener" onclick="return false;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="Searching..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://tpaaaaaa.github.io/tpaaaaaa.github.io/2019/08/26/POJ-2492ABug'sLife/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="我玩维恩不学q">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/tpaaaaaa.github.io/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Tian's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/tpaaaaaa.github.io/2019/08/26/POJ-2492ABug'sLife/" itemprop="url">POJ - 2492 A Bug's Life</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-08-26T22:03:03+08:00">
                2019-08-26
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/tpaaaaaa.github.io/categories/%E5%9B%BE%E8%AE%BA/" itemprop="url" rel="index">
                    <span itemprop="name">图论</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="题目大意："><a href="#题目大意：" class="headerlink" title="题目大意："></a>题目大意：</h2><p><strong>Background</strong><br>若雨妹妹在Debug。他惊奇的发现 Bug有两种性别，异性之间才交往，他感觉很奇怪，于是要做个实验。在他的实验中，Bug们已经被从1开始编好号了。此外，Bug的性别很好辨别。<br><strong>Problem</strong><br>因为若雨妹妹太懒了，他懒得去分析他总结出来的bug数据。你需要根据数据判断是否存在同性恋，输入有 t 组数据,每组数据给出bug数量n, 和关系数m, 以下m行给出相交往的一对Bug编号 a, b。只需要判断有没有，按题目要求输出。</p>
<h2 id="分析："><a href="#分析：" class="headerlink" title="分析："></a>分析：</h2><p>带权并查集，模2系。 注意找到冲突后千万不要直接break，因为输入还没有结束！！。</p>
<h2 id="代码："><a href="#代码：" class="headerlink" title="代码："></a>代码：</h2><pre><code>/*
 Date              : 2019-08-26-15.50.44
 Question_Number   ：poj 2492
 Question_Name     ：带权并查集，模2系
 Description       : cnt[x] 表示x和fx是不是同一个性别
                     cnt[x] == 0表示是同一个性别
                     cnt[x] == 1
                     题目给
                     x, y
                     [x, y] == 1 意思是x和y性别不同
                     [f1, x]   [f2, y]
                     如果f1 == f2
                     [f1, y] = [f1, x] + [x, y];
                     if(f1 == f2)
                     {
                        if(cnt[y] != (cnt[x] + 1)%2)
                        {
                            flag = false;//发现异常
                            break;
                        }
                     }
                     else
                     {
                        pre[f2] = f1; // [f1, f2] = [f1, x] + [x, y] - [f2, y];
                        cnt[f2] = (cnt[x] + 1 - cnt[y] + 2) % 2;
                     }
*/
#include&lt;functional&gt;
#include&lt;cstdio&gt;
#include&lt;cstring&gt;
#include&lt;algorithm&gt;
#include&lt;iostream&gt;
#include&lt;string&gt;
#include&lt;vector&gt;
#include&lt;stack&gt;
#include&lt;bitset&gt;
#include&lt;cstdlib&gt;
#include&lt;cmath&gt;
#include&lt;set&gt;
#include&lt;list&gt;
#include&lt;deque&gt;
#include&lt;map&gt;
#include&lt;queue&gt;
using namespace std;
typedef long long ll;
const double PI = acos(-1.0);
const double eps = 1e-6;
const int INF = 0x3f3f3f3f;
const int MAXN = 2000 + 10;
const int MAXM = 1e6 + 10;
int pre[MAXN], cnt[MAXN];
int findRoot(int x)
{
    if(x != pre[x])
    {
        int f = pre[x];
        pre[x] = findRoot(pre[x]);
        cnt[x] = (cnt[x] + cnt[f]) % 2;
    }
    return pre[x];
}
int main()
{
    int t, kase = 0, n, m, x, y;
    cin &gt;&gt;t;
    while(t--)
    {
        scanf(&quot;%d%d&quot;,&amp;n, &amp;m);

        for(int i = 0; i &lt;= n; i++)
        {
            pre[i] = i;
            cnt[i] = 0;
        }
        bool flag = true;   //如果存在异常，变成false
        for(int i = 1; i &lt;= m; i++)
        {
            scanf(&quot;%d%d&quot;,&amp;x, &amp;y);
            int f1 = findRoot(x);
            int f2 = findRoot(y);
            if(f1 == f2)
            {
                if(cnt[y] != (cnt[x] + 1) % 2)
                {
                    flag = false;
                   // break;          //是我太傻
                }
            }
            else
            {
                pre[f2] = f1;
                cnt[f2] = (cnt[x] + 1 - cnt[y] + 2) % 2;
            }
        }
        printf(&quot;Scenario #%d:\n&quot;, ++ kase);
        if(flag == false)
            printf(&quot;Suspicious bugs found!\n&quot;);
        else
            printf(&quot;No suspicious bugs found!\n&quot;);
        if(t)
            printf(&quot;\n&quot;);
    }
    return 0;
}</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://tpaaaaaa.github.io/tpaaaaaa.github.io/2019/08/26/POJ-1703Findthem,Catchthem/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="我玩维恩不学q">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/tpaaaaaa.github.io/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Tian's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/tpaaaaaa.github.io/2019/08/26/POJ-1703Findthem,Catchthem/" itemprop="url">POJ - 1703 Find them, Catch them</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-08-26T22:01:06+08:00">
                2019-08-26
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/tpaaaaaa.github.io/categories/%E5%9B%BE%E8%AE%BA/" itemprop="url" rel="index">
                    <span itemprop="name">图论</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="题目大意："><a href="#题目大意：" class="headerlink" title="题目大意："></a>题目大意：</h2><p>警方决定捣毁两大犯罪团伙：龙帮和蛇帮，显然一个帮派至少有一人。该城有N个罪犯，编号从1至N（N&lt;=100000。将有M（M&lt;=100000）次操作。<br>D a b 表示a、b是不同帮派<br>A a b 询问a、b关系</p>
<h2 id="分析："><a href="#分析：" class="headerlink" title="分析："></a>分析：</h2><p>模2系的带权并查集，水题略。</p>
<h2 id="代码："><a href="#代码：" class="headerlink" title="代码："></a>代码：</h2><pre><code>/*
 Date              : 2019-08-26-15.32.46
 Question_Number   ：poj 1703
 Question_Name     ：带权并查集，模2系
 Description       :
                     cnt[x] 表示x和fx的关系
                     cnt[x] == 1 表示x与fx 不同 [fx, x]
                     cnt[x] == 0 表示相同
                     A x y  问我x y是不是一个帮派的
                     int f1 = findRoot(x);
                     int f2 = findRoot(y);
                     case A
                     if(f1 == f2)   //
                     {
                        if(cnt[x] == cnt[y]) 是一个帮派的
                        {

                        }
                        else                no
                        {

                        }
                     }
                     else
                     {
                        无法判判断;
                     }
                     case D;
                     D x y  意思是告诉我 x y 是一个帮派的
                     pre[f2] = f1;  [f1, f2]   =  [f1, x] + [x, y] - [f2, y]
                     cnt[f2] = (cnt[x] + 1 - cnt[y] + 2) % 2;
*/
#include&lt;functional&gt;
#include&lt;cstdio&gt;
#include&lt;cstring&gt;
#include&lt;algorithm&gt;
#include&lt;iostream&gt;
#include&lt;string&gt;
#include&lt;vector&gt;
#include&lt;stack&gt;
#include&lt;bitset&gt;
#include&lt;cstdlib&gt;
#include&lt;cmath&gt;
#include&lt;set&gt;
#include&lt;list&gt;
#include&lt;deque&gt;
#include&lt;map&gt;
#include&lt;queue&gt;
using namespace std;
typedef long long ll;
const double PI = acos(-1.0);
const double eps = 1e-6;
const int INF = 0x3f3f3f3f;
const int MAXN = 100000 + 10;
const int MAXM = 100000 + 10;
int pre[MAXN], cnt[MAXN];
int findRoot(int x)
{
    if(pre[x] != x)
    {
        int f = pre[x];
        pre[x] = findRoot(pre[x]);
        cnt[x] = (cnt[x] + cnt[f]) % 2;
    }
    return pre[x];
}
int main()
{
    int T, n, m, x, y;
    char ch;
    cin &gt;&gt; T;
    while(T--)
    {
        scanf(&quot;%d%d&quot;,&amp;n,&amp;m);
        for(int i = 0; i &lt;= n; i++)
        {
            pre[i] = i;
            cnt[i] = 0;
        }
        for(int i = 1; i &lt;= m; i++)
        {
            getchar();  //一个回车
            scanf(&quot;%c&quot;,&amp;ch);
            scanf(&quot;%d%d&quot;,&amp;x,&amp;y);
            int f1 = findRoot(x);
            int f2 = findRoot(y);
            if(ch == &apos;D&apos;)
            {
                pre[f2] = f1;
                cnt[f2] =  (cnt[x] + 1 - cnt[y] + 2) % 2;

            }
            else if(ch == &apos;A&apos;)
            {
                if(f1 == f2)
                {
                    if(cnt[x] == cnt[y])
                        printf(&quot;In the same gang.\n&quot;);
                    else
                        printf(&quot;In different gangs.\n&quot;);
                }
                else
                {
                    printf(&quot;Not sure yet.\n&quot;);
                }
            }


        }
    }
    return 0;
}</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://tpaaaaaa.github.io/tpaaaaaa.github.io/2019/08/26/POJ-2912Rochambeau/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="我玩维恩不学q">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/tpaaaaaa.github.io/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Tian's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/tpaaaaaa.github.io/2019/08/26/POJ-2912Rochambeau/" itemprop="url">POJ - 2912 Rochambeau</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-08-26T21:58:35+08:00">
                2019-08-26
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/tpaaaaaa.github.io/categories/%E5%9B%BE%E8%AE%BA/" itemprop="url" rel="index">
                    <span itemprop="name">图论</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="题目大意："><a href="#题目大意：" class="headerlink" title="题目大意："></a>题目大意：</h2><p>n个小伙伴进行猜拳有戏，除了一个比较聪明的家伙以外，其他人只会出单一的一种，给出m中猜拳的结果，要求找出那个比较聪明的小伙伴序号，并且输出在第几次猜拳可以确定。（注意&lt;,&gt;,=前后可能有空格）</p>
<h2 id="分析："><a href="#分析：" class="headerlink" title="分析："></a>分析：</h2><p>带权并查集，也是模3系。每次枚举一个小朋友的时候，要对pre初始化一次。题目要理解透彻。</p>
<p>代码：</p>
<pre><code>/*
 Date              : 2019-08-26-13.27.04
 Question_Number   ：poj 2912
 Question_Name     ：带权并查集，种类并查集
 Description       :  n个人，编号0 .. n - 1
                      m个回合
                      除了裁判，每个小朋友出的姿势是固定的，也就是除了裁判之外的小朋友之间的关系是固定的
                      但是裁判可以变，所以裁判跟其他小朋友的关系不固定。
                      题目的意思是要我们找出哪个hj8是裁判
                      但是如果有大于1个人出拳的意思可以变
                      意思是可能有多个裁判，那就输出impossible
                      如果没有裁判，则输出no detemine

                      步骤：
                      枚举每一个小朋友，然后把他参与的比赛全部去掉，再用并查集判断其他小朋友有没有出现
                      反常现象，如果没有，说明这个小朋友是可能的裁判，如果出现了反常现象，说明他不是裁判
                      如果可能的裁判大于1个，则说明裁判根本没被选进来
                      如果可能的裁判为1个，那这个hj8就是裁判
                      如果可能的裁判为0，说明裁判多于一个，是impossible的情况
                      判断轮数，就是枚举每个小朋友时，发生冲突的时候的轮数最大的那个（因为每次发生冲突，就意味着这个小朋友的考虑结束了， 不需要考虑下面的回合了）
                      cnt[x] 表示x跟其根节点fx的关系
                      cnt[x] == 0 表示 [fx, x] x与fx平局
                      cnt[x] == 1 表示 [fx, x] x胜fx
                      cnt[x] == 2 表示 [fx, x] x输fx
                      输入如果 x &gt; y 则 w == 2  x &lt; y  w == 1
                      int f1 = findRoot(x);     // [f1, x]  == 1   [x, y] == 1;
                      int f2 = findRoot(y);     // [f1, y]  == 2
                      if(f1 == f2)
                      {
                         if(cnt[x] + d != cnt[y])
                         {

                         }
                      }
                      else                    // [f1, x] == 1   [f2, y] == 2    [f1, f2] = [f1, x] + [x, y] - [f2, y];
                      {
                         pre[f2] = f1;
                         cnt[f2] = cnt[x] + w - cnt[y]  % 3;
                      }


*/
#include&lt;functional&gt;
#include&lt;cstdio&gt;
#include&lt;cstring&gt;
#include&lt;algorithm&gt;
#include&lt;iostream&gt;
#include&lt;string&gt;
#include&lt;vector&gt;
#include&lt;stack&gt;
#include&lt;bitset&gt;
#include&lt;cstdlib&gt;
#include&lt;cmath&gt;
#include&lt;set&gt;
#include&lt;list&gt;
#include&lt;deque&gt;
#include&lt;map&gt;
#include&lt;queue&gt;
using namespace std;
typedef long long ll;
const double PI = acos(-1.0);
const double eps = 1e-6;
const int INF = 0x3f3f3f3f;
const int MAXN = 500 + 10;
const int MAXM = 2000 + 10;
int pre[MAXN], cnt[MAXN];
struct Node
{
    int x, y, w;    //用来记录每一回合的情况
    Node(int x = 0, int y = 0, int w = 0):x(x), y(y), w(w){};
};
Node node[MAXM];
int findRoot(int x)
{
    if(pre[x] != x)
    {
        int f = pre[x];
        pre[x] = findRoot(pre[x]); // [f2, f1]  [f1, x]  == [f2, x];
        cnt[x] = (cnt[x] + cnt[f]) % 3;
    }
    return pre[x];
}
int main()
{
    char ch;
    int n, m;
    while(scanf(&quot;%d%d&quot;,&amp;n,&amp;m) != EOF)
    {

        for(int i = 1; i &lt;= m; i++)
        {
            scanf(&quot;%d&quot;,&amp;node[i].x);     // 这时候w保存的是cnt[x, y]的顺序
            scanf(&quot;%c&quot;,&amp;ch);
            if(ch == &apos;&lt;&apos;)
                node[i].w = 1;
            else if(ch == &apos;&gt;&apos;)
                node[i].w = 2;
            else if(ch == &apos;=&apos;)
                node[i].w = 0;
            scanf(&quot;%d&quot;,&amp;node[i].y);
        }
        int sum = 0;                //可能裁判的数目
        int cir = 0;
        int jud = 0;
        for(int i = 0; i &lt; n; i++)  //枚举每个人
        {
            for(int i = 0; i &lt;= n; i++)//有道理，这里1！！（博客）
            {
                pre[i] = i;
                cnt[i] = 0;
            }
            bool  flag = true;        //如果没发生冲突，那么一直是true，说明这人是可能的裁判，sum++
            for(int j = 1; j &lt;= m; j++) //
            {
                int u = node[j].x;
                int v = node[j].y;
                int w = node[j].w;
                if(u == i || v == i)    //是枚举的那个小朋友
                        continue;                   //   1        2         0
                int f1 = findRoot(u);
                int f2 = findRoot(v);               //   2        2          1
                if (f1 == f2)
                {                                   //   1         1         2
                    if( (cnt[u] + w) % 3 != cnt[v]) //[f1, u] + [u, v] != [f1, v]
                    {
                        cir = max(cir, j);
                        //jud = i;
                        flag = false;
                        break;
                    }

                }
                else                // [f2, v] * 2 % 3
                {                   
                    pre[f2] = f1;   // [f1, f2] = [f1, u] + [u, v] - [f2, v];
                    cnt[f2] = (cnt[u] + w - cnt[v] + 3) % 3;
                }
            }
            if(flag)
            {
                sum++;
                jud = i;
            }

        }
        if(sum == 0)
            printf(&quot;Impossible\n&quot;);
        else if(sum &gt; 1)
            printf(&quot;Can not determine\n&quot;);
        else
            printf(&quot;Player %d can be determined to be the judge after %d lines\n&quot;, jud, cir);

    }
    return 0;
}</code></pre><h2 id="总结："><a href="#总结：" class="headerlink" title="总结："></a>总结：</h2><p>debug能力要加强</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://tpaaaaaa.github.io/tpaaaaaa.github.io/2019/08/26/POJ-1182%E9%A3%9F%E7%89%A9%E9%93%BE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="我玩维恩不学q">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/tpaaaaaa.github.io/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Tian's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/tpaaaaaa.github.io/2019/08/26/POJ-1182%E9%A3%9F%E7%89%A9%E9%93%BE/" itemprop="url">POJ - 1182 食物链</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-08-26T21:54:09+08:00">
                2019-08-26
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/tpaaaaaa.github.io/categories/%E5%9B%BE%E8%AE%BA/" itemprop="url" rel="index">
                    <span itemprop="name">图论</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="题目大意："><a href="#题目大意：" class="headerlink" title="题目大意："></a>题目大意：</h2><p>动物王国中有三类动物A,B,C，这三类动物的食物链构成了有趣的环形。A吃B， B吃C，C吃A。<br>现有N个动物，以1－N编号。每个动物都是A,B,C中的一种，但是我们并不知道它到底是哪一种。<br>有人用两种说法对这N个动物所构成的食物链关系进行描述：<br>第一种说法是”1 X Y”，表示X和Y是同类。<br>第二种说法是”2 X Y”，表示X吃Y。<br>此人对N个动物，用上述两种说法，一句接一句地说出K句话，这K句话有的是真的，有的是假的。当一句话满足下列三条之一时，这句话就是假话，否则就是真话。<br>1） 当前的话与前面的某些真的话冲突，就是假话；<br>2） 当前的话中X或Y比N大，就是假话；<br>3） 当前的话表示X吃X，就是假话。<br>你的任务是根据给定的N（1 &lt;= N &lt;= 50,000）和K句话（0 &lt;= K &lt;= 100,000），输出假话的总数。 </p>
<h2 id="分析："><a href="#分析：" class="headerlink" title="分析："></a>分析：</h2><p>cnt[x] 表示的是[fx, x] x和fx的关系 = 0 表示 x和fx是同类， = 1 表示x吃fx， =2表示x被fx吃.（具体分析验算自己到时候走一遍）</p>
<p>关于怎么设计0，1, 2。自己凭感觉，然后举几个例子试试区间加减法成不成立即可。</p>
<p>题目给的信息是x y是同类 or x 吃 y 也就是[x, y] == 0 or 2 或 [y, x] == 0 or 1;</p>
<p>对于查找函数</p>
<pre><code>int findRoot(int x)
{
    if(pre[x] != x)  // cnt[x] 表示的是[f, x]的关系，也就是x和f的关系
    {
        int f = pre[x];
        pre[x] = findRoot(pre[x]);// 此后cnt[f] 表示的是[根,f]的关系
        cnt[x] = (cnt[x] + cnt[f]) % 3;//此时cnt[x] 表示的是[根,x]的关系
//  [根,x] = [根,f] + [f, x]  
    }
    return pre[x];
}</code></pre><p>关于合并函数：</p>
<pre><code>int f1 = findRoot(x);
int f2 = findRoot(y);
if(f1 == f2)
{
    if((cnt[x] - cnt[y] + 3) % 3 != d)
        ans ++;
}
else
{
    pre[f2] = f1;
    cnt[f2] = (cnt[x] + (d*2) % 3 - cnt[y] + 3) % 3;
}</code></pre><p>题目给的关系是[y, x] == 0 or 1 , cnt[x] 表示的是[f1, x] ; cnt[y]表示的是[f2, y];</p>
<p>如果f1 == f2</p>
<p>[f1, y] + [y, x] = [f1, x];</p>
<p>也就是cnt[y] + d =?= cnt[x]; (上面的代码只是移项了而已)</p>
<p>如果f1 != f2 , 令pre[f2] = f1； 把f2挂在f1后面, 此时cnt[f2] 变成了[f1, f2]的关系</p>
<p>[f1, f2] = [f1, x] + [x, y] + [y, f2];</p>
<p>[f1, f2] = [f1, x] - [y, x] - [f2, y]; (与以上代码里面的不一样，思想重要)</p>
<p>也就是cnt[f2] = cnt[x] - d - cnt[y];</p>
<h2 id="代码："><a href="#代码：" class="headerlink" title="代码："></a>代码：</h2><pre><code>/*
 Date              : 2019-08-26-12.43.48
 Question_Number   ：poj 1182
 Question_Name     ：带权并查集之种类并查集
 Description       :
                    cnt[x] 记录的是x跟fx的关系
                    1 x y 表示 x 跟y是同类
                    2 x y 表示 x 吃 y
                    cnt[x] == 0 表示是同类
                    cnt[x] == 1 表示x吃fx
                    cnt[x] == 2 表示x被fx吃

                    [fx, x] == 0;   x 和 fx是同类
                    [fy, fx] == 1;  fx 吃 fy
                    那么[fy, x] == 1;             // x 吃fy
                    [fx, x] == 2;   x 被 fx吃
                    [fy, fx] == 1;  fx 吃 fy
                    那么[fy, x] == (1 + 2) % 3;   //x 和 fy是同类

                    [fx, x] == 1;   x吃fx
                    [y, fx] == 1;   fx 吃y
                    [y, x] = 2;                   //x 被 y 吃
                    所以实际上是一个模3系的带权并查集
                                            // 如果d == 2, d--, [y, x] == 1;
                                            // [x, y] = [y, x]*2 % 3
                    int f1 = findRoot(x);   // [f1, x]  [f2, y]
                    int f2 = findRoot(y);   // cnt[x] - cnt[y] != d
                                            // [f1, x] - [f2, y] != d;
                    if(f1 == f2)
                    {
                        if((cnt[x] - cnt[y] + 3) % 3 != d)
                            ans ++;
                    }
                    else
                    {
                        pre[f2] = f1;       // [f1, f2];
                                            // [f1, f2] = [f1, x] + [x, y] - [f2, y]
                        cnt[f2] =  (cnt[x] + (d*2) % 3 - cnt[y] + 3) % 3;
                    }

*/
#include&lt;functional&gt;
#include&lt;cstdio&gt;
#include&lt;cstring&gt;
#include&lt;algorithm&gt;
#include&lt;iostream&gt;
#include&lt;string&gt;
#include&lt;vector&gt;
#include&lt;stack&gt;
#include&lt;bitset&gt;
#include&lt;cstdlib&gt;
#include&lt;cmath&gt;
#include&lt;set&gt;
#include&lt;list&gt;
#include&lt;deque&gt;
#include&lt;map&gt;
#include&lt;queue&gt;
using namespace std;
typedef long long ll;
const double PI = acos(-1.0);
const double eps = 1e-6;
const int INF = 0x3f3f3f3f;
const int MAXN = 50000 + 10;
int pre[MAXN], cnt[MAXN];
int findRoot(int x)
{
    if(pre[x] != x)
    {
        int f = pre[x];
        pre[x] = findRoot(pre[x]);
        cnt[x] = (cnt[x] + cnt[f]) % 3;
    }
    return pre[x];
}
int main()
{
    int n, k;
    scanf(&quot;%d%d&quot;,&amp;n, &amp;k);
    for(int i = 0; i &lt;= n; i++)
    {
        pre[i] = i;
        cnt[i] = 0;
    }
    int ans = 0;
    int d, x, y;
    for(int i = 1; i &lt;= k; i++)
    {
        scanf(&quot;%d%d%d&quot;,&amp;d, &amp;x, &amp;y); //d== 2  cnt[y, x] = 2;
        if(x &gt; n || y &gt; n || ((d == 2)&amp;&amp;(x == y)) )
        {
            ans ++;
            continue;
        }
        d--;
        int f1 = findRoot(x);
        int f2 = findRoot(y);

        if(f1 == f2)
        {
            if((cnt[x] - cnt[y] + 3) % 3 != d)
                ans ++;
        }
        else
        {
            pre[f2] = f1;
            cnt[f2] = (cnt[x] + (d*2) % 3 - cnt[y] + 3) % 3;
        }
    }
    printf(&quot;%d\n&quot;,ans);
    return 0;
}</code></pre><h2 id="总结："><a href="#总结：" class="headerlink" title="总结："></a>总结：</h2><p>理清思路再写，舒服</p>
<p>带权并查集相较于普通并查集多出来的一个cnt[x] 实际上反映的是<strong>x和其根节点fx的关系</strong> 或者 <strong>(fx, x]这个区间的属性</strong>（属性就要考虑加减时候的区间开闭，建议左开右闭）</p>
<p>一般而言，关系是模2系、模3系的，区间的属性是模n系的。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://tpaaaaaa.github.io/tpaaaaaa.github.io/2019/08/26/HDU-3047ZjnuStadium/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="我玩维恩不学q">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/tpaaaaaa.github.io/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Tian's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/tpaaaaaa.github.io/2019/08/26/HDU-3047ZjnuStadium/" itemprop="url">HDU - 3047 Zjnu Stadium</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-08-26T21:27:26+08:00">
                2019-08-26
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/tpaaaaaa.github.io/categories/%E5%9B%BE%E8%AE%BA/" itemprop="url" rel="index">
                    <span itemprop="name">图论</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="题目大意："><a href="#题目大意：" class="headerlink" title="题目大意："></a>题目大意：</h2><p>铁头王国最近忙着举行比赛，但他们体育场的座位且非常少仅仅300列(还是比较穷。。。 好吧非常穷)，这当然跟zx的统治有直接关系。体育场列标号为1-300,行无限(一列可以有多人重复坐）体育场是一个环。为了清楚的知道某两个市民之间的距离，国王zx给了你一些数据。给出n个人和m个关系,关系为A B x表示A位置若为i,则B位置在A顺时针加x的位置。如果一个关系在前面给出的关系中矛盾,则称其不成立。求不成立关系个数。 </p>
<h2 id="分析："><a href="#分析：" class="headerlink" title="分析："></a>分析：</h2><p>带权并查集，模300。</p>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><pre><code>/*
 Date              : 2019-08-26-11.18.28
 Question_Number   ：hdu 3047
 Question_Name     ：zjnu stadium
 Description       : 种类并查集
                    cnt[x] 表示x距离其根节点位置的距离
                    pre[x] = fx;
                    则cnt[x] = x - fx; (fx, x];
                    输入 A,B,x;//x 表示的是(A, B];
                    int f1 = findRoot(A), f2 = findRoot(B);
                    if(f1 == f2)
                    {
                        if(sum[B] - sum[A] != x)
                        {
                            ans ++;
                        }
                    }
                    else
                    {
                        pre[f2] = f1; // sum[f2] =  (f1, f2] = ((f1, A] + (A, B] + (B, f2]) % 300;
                        sum[f2] = sum[A] + x - sum[B] % 300;
                    }
*/
#include&lt;functional&gt;
#include&lt;cstdio&gt;
#include&lt;cstring&gt;
#include&lt;algorithm&gt;
#include&lt;iostream&gt;
#include&lt;string&gt;
#include&lt;vector&gt;
#include&lt;stack&gt;
#include&lt;bitset&gt;
#include&lt;cstdlib&gt;
#include&lt;cmath&gt;
#include&lt;set&gt;
#include&lt;list&gt;
#include&lt;deque&gt;
#include&lt;map&gt;
#include&lt;queue&gt;
using namespace std;
typedef long long ll;
const double PI = acos(-1.0);
const double eps = 1e-6;
const int INF = 0x3f3f3f3f;
const int MAXN = 50000 + 10;
int pre[MAXN], sum[MAXN];
int findRoot(int x)
{
    if(pre[x] != x)
    {
        int f = pre[x];
        pre[x] = findRoot(pre[x]);
        sum[x] = (sum[x] + sum[f]) % 300;
    }
    return pre[x];
}
int main()
{
    int n, m, A, B, w;
    while(scanf(&quot;%d%d&quot;,&amp;n, &amp;m) != EOF)
    {
        int ans = 0;
        for(int i = 0; i &lt;= n; i++)
        {
            pre[i] = i;
            sum[i] = 0;
        }
        for(int i = 1; i &lt;= m; i++)
        {
            scanf(&quot;%d%d%d&quot;, &amp;A, &amp;B, &amp;w);
            int f1 = findRoot(A);
            int f2 = findRoot(B);
            if(f1 == f2)
            {
                if((sum[B] - sum[A] + 300) % 300!= w)
                    ans ++;
            }
            else
            {
                pre[f2] = f1;
                sum[f2] = (sum[A] + w - sum[B] + 300) % 300;
            }
        }
        printf(&quot;%d\n&quot;,ans);
    }
    return 0;
}</code></pre><h2 id="总结："><a href="#总结：" class="headerlink" title="总结："></a>总结：</h2><p>水题略</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://tpaaaaaa.github.io/tpaaaaaa.github.io/2019/08/26/POJ-1733Paritygame/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="我玩维恩不学q">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/tpaaaaaa.github.io/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Tian's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/tpaaaaaa.github.io/2019/08/26/POJ-1733Paritygame/" itemprop="url">POJ - 1733 Parity game</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-08-26T21:24:30+08:00">
                2019-08-26
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/tpaaaaaa.github.io/categories/%E5%9B%BE%E8%AE%BA/" itemprop="url" rel="index">
                    <span itemprop="name">图论</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="题目大意："><a href="#题目大意：" class="headerlink" title="题目大意："></a>题目大意：</h2><p>现在你和你的朋友正在玩一种游戏。 你的朋友写下一串0和1的序列，然后你选择其中一串子序列（如[3,5]）并且问他这个序列是包含奇数个1还是偶数个1（和是奇数还是偶数）。 你可以问你的朋友任意个问题，而你的朋友会回答你的问题。 你的任务是猜出整个朋友的序列。</p>
<p>但是，你发现你的朋友告诉你的信息可能有误，所以你想写一个程序来指出他的错误。这个程序应该接受一系列你的问题和答案。程序的目标是找到第一个错误的答案。</p>
<h2 id="分析："><a href="#分析：" class="headerlink" title="分析："></a>分析：</h2><p>带权并查集，模2系，离散化处理。</p>
<p>cnt[x] 表示的是(fx, x] 这个区间和是奇数还是偶数 奇数为1， 偶数为0</p>
<p>题目给的是[x, y] 这个区间是奇数还是偶数 也就是(x - 1, y]这个区间</p>
<p>查找代码</p>
<pre><code>int findRoot(int x)
{
    if(pre[x] != x)   //此时的cnt[x] 表示的是(f, x]这个区间的属性
    {
        int f = pre[x];
        pre[x] = findRoot(pre[x]);// 此时cnt[f] 表示的是(根, f]的属性
        cnt[x] = (cnt[x] ^ cnt[f]);//此时cnt[x] 变成 (根, x]这个属性
   //(根, x] = ((根, f] + (f, x]) % 2;
    }
    return pre[x];
}</code></pre><p>合并代码</p>
<pre><code>if(f1 == f2)
{
    if((cnt[x] + w[i]) % 2 != cnt[y])       //我他妈的是个瞎子。
    {
        ans = i - 1;
        break;
    }
}
else
{
    pre[f2] = f1;
    cnt[f2] = (cnt[x] + w[i]- cnt[y] + 2) % 2;
}</code></pre><p>题目给的是[x, y] == (x - 1, y] 这个区间的奇偶性, cnt[x - 1] 表示的是(f1, x - 1]这个区间, cnt[y] 表示的是(f2, y]这个区间 (与以上代码不同，重要的是思想)</p>
<p>如果f1 == f2, 则 (f1, y] == (f1, x - 1] + (x - 1, y];</p>
<p>如果f1 != f2，则pre[f2] = f1 之后的 cnt[f2] 表示的是(f1, f2]这个区间</p>
<p>(f1, f2] = (f1, x - 1] + (x - 1, y] - (f2, y] 这个区间</p>
<p>关于离散化：</p>
<p>将要用到的点加到数组 or vector 中，排序后去重即可获得离散化后的表.</p>
<h2 id="代码："><a href="#代码：" class="headerlink" title="代码："></a>代码：</h2><pre><code>/*
 Date              : 2019-08-26-09.47.56
 Question_Number   ：poj 1733
 Question_Name     ：离散化，带权并查集
 Description       :
*/
#include&lt;functional&gt;
#include&lt;cstdio&gt;
#include&lt;cstring&gt;
#include&lt;algorithm&gt;
#include&lt;iostream&gt;
#include&lt;string&gt;
#include&lt;vector&gt;
#include&lt;stack&gt;
#include&lt;bitset&gt;
#include&lt;cstdlib&gt;
#include&lt;cmath&gt;
#include&lt;set&gt;
#include&lt;list&gt;
#include&lt;deque&gt;
#include&lt;map&gt;
#include&lt;queue&gt;
using namespace std;
typedef long long ll;
const double PI = acos(-1.0);
const double eps = 1e-6;
const int INF = 0x3f3f3f3f;
const int MAXN = 1e9 + 10;
const int MAXM = 200005;
int  w[MAXM];
vector &lt; int &gt;  vec;//离散化后的表，最多有2MAXM个点
int record[2][MAXM];    //用来记录的
int cnt[MAXM], pre[MAXM];
string str;
int findRoot(int x)
{
    if(pre[x] != x)
    {
        int f = pre[x];
        pre[x] = findRoot(pre[x]);
        cnt[x] = (cnt[x] ^ cnt[f]);
    }
    return pre[x];
}
int main()
{
    int n, m;
    while(scanf(&quot;%d&quot;,&amp;n) != EOF)
    {
        scanf(&quot;%d&quot;,&amp;m);
        vec.clear();
        for(int i = 1; i &lt;= m; i++)
        {
            scanf(&quot;%d%d&quot;, &amp;record[0][i], &amp;record[1][i]);
            vec.push_back(record[0][i] - 1);
            vec.push_back(record[1][i]);
            cin &gt;&gt; str;
            if(str == &quot;even&quot;)
                w[i] = 0;
            else if(str == &quot;odd&quot;)
                w[i] = 1;
        }
        sort(vec.begin(), vec.end());
        int sizee = unique(vec.begin(), vec.end()) - vec.begin();
        for(int i = 0; i &lt;= sizee; i++)
        {
            pre[i] = i;
            cnt[i] = 0;
        }
        int ans = m;
        for(int i = 1; i &lt;= m ; i++)
        {
            int x = lower_bound(vec.begin(), vec.begin() + sizee, record[0][i] - 1) - vec.begin();
            int y = lower_bound(vec.begin(), vec.begin() + sizee, record[1][i]) - vec.begin();
            int f1 = findRoot( x );
            int f2 = findRoot( y );
            if(f1 == f2)
            {
                if((cnt[x] + w[i]) % 2 != cnt[y])       //我他妈的是个瞎子。
                {
                    ans = i - 1;
                    break;
                }
            }
            else
            {
                pre[f2] = f1;
                cnt[f2] = (cnt[x] + w[i]- cnt[y] + 2) % 2;
            }
        }
        printf(&quot;%d\n&quot;,ans);
    }

    return 0;
}</code></pre><h2 id="总结："><a href="#总结：" class="headerlink" title="总结："></a>总结：</h2><p>眼睛有点不好使，一个分号WA了半天，总算找到了。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://tpaaaaaa.github.io/tpaaaaaa.github.io/2019/08/26/HDU-3038HowManyAnswersAreWrong/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="我玩维恩不学q">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/tpaaaaaa.github.io/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Tian's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/tpaaaaaa.github.io/2019/08/26/HDU-3038HowManyAnswersAreWrong/" itemprop="url">HDU - 3038 How Many Answers Are Wrong</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-08-26T20:11:12+08:00">
                2019-08-26
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/tpaaaaaa.github.io/categories/%E5%9B%BE%E8%AE%BA/" itemprop="url" rel="index">
                    <span itemprop="name">图论</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="题目大意"><a href="#题目大意" class="headerlink" title="题目大意"></a>题目大意</h2><p>给定一个长为N的数组a[]，有M个询问和结果。所谓询问形如：x y z，表示a[x]+a[x+1]+……+a[y]=z。如果某个询问及结果与前面的询问及结果冲突，即为错误结果。输出总共有多少错误结果。 tip：假设已知{1 10 100}，之后出现{1 9 200} ，则显然{1 9 200}是错误的（我们假定先出现的必定正确）</p>
<h2 id="分析："><a href="#分析：" class="headerlink" title="分析："></a>分析：</h2><p>带权并查集的 区间统计。配合自创的区间分析法更佳 , 注意区间要变成左开右闭.</p>
<p>cnt[x] 表示x到fx 这个区间的和 (fx, x]</p>
<p>题目给你x y z 给的就是[x , y ]== (x - 1, y] == z 的意思</p>
<p>对于查找函数：</p>
<pre><code>int findRoot(int x)
{
    if( pre[x] != x ) // 此时cnt[x] 记录的是(f, x]的区间和
    {
        int f = pre[x];
        pre[x] = findRoot(pre[x]);//此后cnt[f] 记录的是(根, f] 的值
        cnt [x] += cnt[f];//cnt[x] 此时记录的是(根, x]的值
                          //(根, x] = (根, f] + (f, x];
    }
    return pre[x];
}</code></pre><p>合并部分：</p>
<pre><code>int f1 = findRoot(x - 1);   //sum1 =  (f1, x-1];
int f2 = findRoot(y);       //sum2 =  (f2, y];
if(f1 == f2)
{
    if(cnt[x - 1] + w != cnt[y])    // sum1 + w != sum2   (f1,x-1] + [x,y] != (f1, y]
        s++;
}
else
{
    pre[f2] = f1;           // sum3 = (f1, f2];
    cnt[f2] = cnt[x - 1] + w - cnt[y];// sum3 = sum1 + w - sum2 = (f1, x-1] + [x, y] - (f2, y];
}</code></pre><p>f1 == f2 以为着, cnt[x - 1] 记录的是(f1, x-1]的值 cnt[y] 记录的是(f1, y]的值</p>
<p>而题目给的是 (x - 1, y] = d 联系起来</p>
<p>(f1, x - 1] + (x - 1, y ] = (f1, y]</p>
<p>也就是 cnt[x - 1] + d =?= cnt[y]</p>
<p>如果 f1 != f2; 那么将f2挂在f1后面，之后cnt[f2] 记录的是 (f1, f2]的值</p>
<p>(f1, f2] = (f1, x - 1] + (x - 1, y] - (f2, y];</p>
<p>所以cnt[f2] = cnt[x] + w - cnt[y];</p>
<h2 id="代码："><a href="#代码：" class="headerlink" title="代码："></a>代码：</h2><pre><code>/*
 Date              : 2019-08-25-19.27.30
 Question_Number   ：hdu 3038
 Question_Name     ：区间统计，并查集
 Description       :
                fx = 3   x = 6
                fy = 3   y = 4
                fy = 4   y = 5
                fy = 3
                [3,6]
                [4,5]
                    [3,4] = [3,6] - [4,5] + [5,6];

*/
#include&lt;functional&gt;
#include&lt;cstdio&gt;
#include&lt;cstring&gt;
#include&lt;algorithm&gt;
#include&lt;iostream&gt;
#include&lt;string&gt;
#include&lt;vector&gt;
#include&lt;stack&gt;
#include&lt;bitset&gt;
#include&lt;cstdlib&gt;
#include&lt;cmath&gt;
#include&lt;set&gt;
#include&lt;list&gt;
#include&lt;deque&gt;
#include&lt;map&gt;
#include&lt;queue&gt;
using namespace std;
typedef long long ll;
const double PI = acos(-1.0);
const double eps = 1e-6;
const int INF = 0x3f3f3f3f;
const int MAXN = 2e5 + 10;
const int MAXM = 4e4 + 10;
int pre[MAXN], cnt[MAXN];
int findRoot(int x)
{
    if( pre[x] != x )
    {
        int f = pre[x];
        pre[x] = findRoot(pre[x]);
        cnt [x] += cnt[f];
    }
    return pre[x];

}
int main()
{
    int n, m, ans;
    while(scanf(&quot;%d%d&quot;,&amp;n,&amp;m) != EOF)
    {
        int s = 0;
        int x, y, w;
        for(int i = 0; i &lt;= n; i++)
        {
            pre[i] = i;
            cnt[i] = 0;
        }
        for(int i = 1; i &lt;= m; i++)
        {
            scanf(&quot;%d%d%d&quot;,&amp;x,&amp;y,&amp;w);   //  w  =  [x, y];
            int f1 = findRoot(x - 1);   //sum1 =  (f1, x-1];
            int f2 = findRoot(y);       //sum2 =  (f2, y];
            if(f1 == f2)
            {
                if(cnt[x - 1] + w != cnt[y])    // sum1 + w != sum2   (f1,x-1] + [x,y] != (f1, y]
                    s++;
            }
            else
            {
                pre[f2] = f1;           // sum3 = (f1, f2];
                cnt[f2] = cnt[x - 1] + w - cnt[y];// sum3 = sum1 + w - sum2 = (f1, x-1] + [x, y] - (f2, y];
            }
        }
        printf(&quot;%d\n&quot;,s);
    }

    return 0;
}</code></pre><h2 id="总结："><a href="#总结：" class="headerlink" title="总结："></a>总结：</h2><p>并查集好好玩！！！明天剪头发</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://tpaaaaaa.github.io/tpaaaaaa.github.io/2019/08/26/HDU-3635DragonBalls/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="我玩维恩不学q">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/tpaaaaaa.github.io/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Tian's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/tpaaaaaa.github.io/2019/08/26/HDU-3635DragonBalls/" itemprop="url">HDU - 3635 Dragon Balls</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-08-26T19:56:25+08:00">
                2019-08-26
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/tpaaaaaa.github.io/categories/%E5%9B%BE%E8%AE%BA/" itemprop="url" rel="index">
                    <span itemprop="name">图论</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="题目大意："><a href="#题目大意：" class="headerlink" title="题目大意："></a>题目大意：</h2><p>有标号为1到n的n个龙珠，分别放在对应标号为1到n的n个城市里。<br>下面有两种操作:<br>T A B表示把A龙珠所在城市的所有龙珠都转移到B龙珠所在的城市中<br>Q A 表示查询A，需要知道A龙珠现在所在的城市，A所在的城市有几颗龙珠，A转移到这个城市移动了多少次,分别输出3个整数，表示上述信息。</p>
<h2 id="分析："><a href="#分析：" class="headerlink" title="分析："></a>分析：</h2><p>cnt[x] 表示的是x移动到fx移动了多少次, s[x] 表示的是x所在集合的数目</p>
<p>查找函数</p>
<pre><code>int findRoot(int x)
{
    if(pre[x] != x)       //  此时的cnt[x] 表示是x移动到f的次数 [f, x]
    {
        int f = pre[x];   // 
        pre[x] = findRoot(pre[x]);// cnt[f] 表示的将f移动到根节点的次数 [根, f]
        cnt[x] += cnt[f];// 此时的cnt[x] 表示的是将x 移动到根的次数
                         //[根, x] = [根, f] + [f, x]
                         // = 自己移动到f的次数  加上  f移动到根的次数（此时自己已经和f一起动了）
    }
    return pre[x];
}</code></pre><p>合并部分：</p>
<pre><code>if(f1 != f2)
    {
        pre[f1] = f2;   // 将f1合并到f2的后面
        s[f2] += s[f1]; // f2的对数发生改变
        s[f1] = s[f2];
        cnt[f1] ++;     //f1 这一堆移动的次数加1, 只是根节点加
                        //以后利用findRoot函数会往下传递
    }</code></pre><h2 id="代码："><a href="#代码：" class="headerlink" title="代码："></a>代码：</h2><pre><code>/*
 Date              : 2019-08-25-19.04.39
 Question_Number   ：HDU 3635
 Question_Name     ：dragon balls
 Description       : T A B
                     意味着把A这棵树，放到B下面
                     int f1 = findRoot(A)
                     int f2 = findRoot(B)
                     pre[f1] = f2;
                     s[f2] += s[f1];
                     cnt[f1]++;  //
*/
#include&lt;functional&gt;
#include&lt;cstdio&gt;
#include&lt;cstring&gt;
#include&lt;algorithm&gt;
#include&lt;iostream&gt;
#include&lt;string&gt;
#include&lt;vector&gt;
#include&lt;stack&gt;
#include&lt;bitset&gt;
#include&lt;cstdlib&gt;
#include&lt;cmath&gt;
#include&lt;set&gt;
#include&lt;list&gt;
#include&lt;deque&gt;
#include&lt;map&gt;
#include&lt;queue&gt;
using namespace std;
typedef long long ll;
const double PI = acos(-1.0);
const double eps = 1e-6;
const int INF = 0x3f3f3f3f;
const int MAXN = 1e4 + 10;
int pre[MAXN], s[MAXN], cnt[MAXN];
int findRoot(int x)
{
    if(pre[x] != x)
    {
        int f = pre[x];
        pre[x] = findRoot(pre[x]);
        cnt[x] += cnt[f];
    }
    return pre[x];
}
int main()
{
    int T, n, q, kase = 0;
    cin &gt;&gt; T;
    while(T--)
    {
        printf(&quot;Case %d:\n&quot;, ++kase);
        scanf(&quot;%d%d&quot;,&amp;n,&amp;q);
        for(int i = 1; i &lt;= n; i++)
        {
            pre[i] = i;
            s[i] = 1;
            cnt[i] = 0;
        }
        char ch;
        int u,v;
        for(int i = 1; i &lt;= q; i++)
        {
            cin &gt;&gt; ch;
            if(ch == &apos;T&apos;)
            {
                scanf(&quot;%d%d&quot;,&amp;u,&amp;v);
                int f1 = findRoot(u);
                int f2 = findRoot(v);
                if(f1 != f2)
                {
                    pre[f1] = f2;
                    s[f2] += s[f1];
                    s[f1] = s[f2];
                    cnt[f1] ++;
                }
            }
            else if(ch == &apos;Q&apos;)
            {
                scanf(&quot;%d&quot;,&amp;u);
                int f = findRoot(u);
                printf(&quot;%d %d %d\n&quot;,f,s[f],cnt[u]);
            }
        }
    }
    return 0;
}</code></pre><h2 id="总结："><a href="#总结：" class="headerlink" title="总结："></a>总结：</h2><p>状态不错，好好保持，明天去剪个头。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://tpaaaaaa.github.io/tpaaaaaa.github.io/2019/08/26/POJ-1988CubeStacking/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="我玩维恩不学q">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/tpaaaaaa.github.io/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Tian's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/tpaaaaaa.github.io/2019/08/26/POJ-1988CubeStacking/" itemprop="url">POJ - 1988 Cube Stacking</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-08-26T19:45:34+08:00">
                2019-08-26
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/tpaaaaaa.github.io/categories/%E5%9B%BE%E8%AE%BA/" itemprop="url" rel="index">
                    <span itemprop="name">图论</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="题目大意："><a href="#题目大意：" class="headerlink" title="题目大意："></a>题目大意：</h2><p>有n个箱子，初始时每个箱子单独为一列；<br>接下来有p行输入，M, x, y 或者 C, x；<br>对于M,x,y：表示将x箱子所在的一列箱子搬到y所在的一列箱子上；<br>对于C,x：表示求箱子x下面有多少个箱子；</p>
<h2 id="分析："><a href="#分析：" class="headerlink" title="分析："></a>分析：</h2><p>简单的带权并查集。采用自创的<strong>区间分析法</strong>(#^.^#)</p>
<p>我们令cnt[x] 表示x到其根fx中间的箱子数,s[x] 表示x所在集合中的箱子数</p>
<p>那么并查集中的查找函数为：</p>
<pre><code>int findRoot(int x)
{
    if(x != pre[x])  // 所以此时cnt[x] 表示的是[fa, x] 这个区间的属性
    {
        int fa = pre[x];          //可以知道cnt[fa] 表示的是[根, fa]这个区间
        pre[x] = findRoot(pre[x]);//这个时候f的根更改了，所以cnt[x] 表示的是[根, x]
        cnt[x] += cnt[fa];// [根, x] = [根, fa] + [fa, x];
    }
    return pre[x];
}</code></pre><p>见注释！！</p>
<p>集合合并部分：</p>
<pre><code>if(f1 != f2)
{
    pre[f1] = f2;  // 此时cnt[f1] 表示的是[f2, f1]这个区间
    cnt[f1] = s[f2];// 因为是将f1这个集合接在f2整个集合下面
    s[f2] += s[f1];
}</code></pre><h2 id="代码："><a href="#代码：" class="headerlink" title="代码："></a>代码：</h2><pre><code>/*
 Date              : 2019-08-25-18.35.26
 Question_Number   ：POJ - 1988
 Question_Name     ：cube stacking
 Description       : n个点，M x,y，将x点合并到y上面
                     cnt[i] 表示i下面的块数
                     s[i] 表示所在堆的数目
                     M x y
                     f1 = pre[x], f2 = pre[y];
                     实际上是pre[y] = f1;
                             cnt[x] += cnt[f2];
                    emmmm 题目意思转一转，就是cnt[i] 表示i到根的块数，M x y 表示将x合并到y的下面

*/
#include&lt;functional&gt;
#include&lt;cstdio&gt;
#include&lt;cstring&gt;
#include&lt;algorithm&gt;
#include&lt;iostream&gt;
#include&lt;string&gt;
#include&lt;vector&gt;
#include&lt;stack&gt;
#include&lt;bitset&gt;
#include&lt;cstdlib&gt;
#include&lt;cmath&gt;
#include&lt;set&gt;
#include&lt;list&gt;
#include&lt;deque&gt;
#include&lt;map&gt;
#include&lt;queue&gt;
using namespace std;
typedef long long ll;
const double PI = acos(-1.0);
const double eps = 1e-6;
const int INF = 0x3f3f3f3f;
const int MAXN = 30000 + 10;
int pre[MAXN], s[MAXN], cnt[MAXN];
int findRoot(int x)
{
    if(x != pre[x])
    {
        int fa = pre[x];
        pre[x] = findRoot(pre[x]);
        cnt[x] += cnt[fa];
    }
    return pre[x];
}
int main()
{
    for(int i = 1; i &lt; MAXN - 5; i++)
    {
        pre[i] = i;
        s[i] = 1;
    }
    int n,u,v;
    char ch;
    scanf(&quot;%d&quot;,&amp;n);
    for(int i = 1; i &lt;= n; i++)
    {
        getchar();
        scanf(&quot;%c&quot;,&amp;ch);
        if(ch == &apos;M&apos;)
        {
            scanf(&quot;%d%d&quot;,&amp;u,&amp;v);
            int f1 = findRoot(u);
            int f2 = findRoot(v);
            if(f1 != f2)
            {
                pre[f1] = f2;
                cnt[f1] = s[f2];
                s[f2] += s[f1];
            }
        }
        else
        {
            scanf(&quot;%d&quot;,&amp;u);
            findRoot(u);
            printf(&quot;%d\n&quot;,cnt[u]);
        }
    }
    return 0;
}</code></pre><h2 id="总结："><a href="#总结：" class="headerlink" title="总结："></a>总结：</h2><p>并查集是一种对于区间的操作，所以我的区间分析法很有用，屡试不爽哦</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://tpaaaaaa.github.io/tpaaaaaa.github.io/2019/08/25/HDU-4114Disney'sFastPass/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="我玩维恩不学q">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/tpaaaaaa.github.io/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Tian's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/tpaaaaaa.github.io/2019/08/25/HDU-4114Disney'sFastPass/" itemprop="url">HDU - 4114 Disney's FastPass</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-08-25T16:07:53+08:00">
                2019-08-25
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/tpaaaaaa.github.io/categories/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/" itemprop="url" rel="index">
                    <span itemprop="name">动态规划</span>
                  </a>
                </span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/tpaaaaaa.github.io/categories/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/%E5%9B%BE%E8%AE%BA/" itemprop="url" rel="index">
                    <span itemprop="name">图论</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="题目："><a href="#题目：" class="headerlink" title="题目："></a>题目：</h2><p>Disneyland is a large theme park with plenties of entertainment facilities, also with a large number of tourists. Normally, you need to wait for a long time before geting the chance to enjoy any of the attractions. The FastPass is a system allowing you to pick up FastPass-tickets in some specific position, and use them at the corresponding facility to avoid long lines. With the help of the FastPass System, one can arrange his/her trip more efficiently.<br>You are given the map of the whole park, and there are some attractions that you are interested in. How to visit all the interested attractions within the shortest time?</p>
<h2 id="分析："><a href="#分析：" class="headerlink" title="分析："></a>分析：</h2><p>首先用floyd求出各对点的最短路。然后从起点开始刷表法。</p>
<p>DP数组 dp[i][s1][s2] 表示当前在位置 i 处，已经拥有s1(状态压缩)处的FT，已经遍历过s2（状态压缩）处的所耗时间.</p>
<p>对于某个位置，他能转移到两种情况：</p>
<p>第一种情况是去游玩一个兴趣点，第二种情况是去某个点取FT票。</p>
<h2 id="代码："><a href="#代码：" class="headerlink" title="代码："></a>代码：</h2><pre><code>/*
 Date              : 2019-08-24-11.19.51
 Question_Number   ：HDU - 4114
 Question_Name     ：disney&apos;s fastpass
 Description       : N个点，M个边，K个想去的点
                     N个点1 .. N 路径必须从1到1
                     对于感兴趣的点
                     Pi 表示该点编号
                     Ti 表示不用Fastpath要耗的时间
                     FTi 表示用..耗的时间
                     Ni 有Ni个点可以获得第i个点的Fp
                     Fi ... Ni 个 点的位置
                     也就是说如果到达i点之间
                     已经到过Ni个点中的其中一个
                     则该点耗时time = FTi,否则为
                     Ti
                    有可能由重复点
                     经过某个点拿fp不需要排队，旅游某个点需要排队
                     状态压缩 + DP刷表法 + floyd
                     好好总结一下刷表法（博客）
                     熟练掌握状压... 这题目好（博客）
                     首先根据所给的图，求一遍floyd
                     DP数组 dp[i][s1][s2] 表示当前在位置i处，已经拥有s1处的FT，已经遍历过s2处的所耗时间
                     由这一个位置，可以转移至我的某个兴趣点去游玩，更新下一个点的数据（要加上路上的时间和排队的时间）
                     也可以转移到另一个点去取票，更新下一个点的数据(要加上路上的时间)
                     关于刷表法.
                     边界条件
                        如果该点的dp = INF, 说明这个点没有被之前的点刷到过，也可以理解为该点到不了，所以continue
                        如果兴趣点都去了，则ans = dp + dis[1][i]


*/
#include&lt;functional&gt;
#include&lt;cstdio&gt;
#include&lt;cstring&gt;
#include&lt;algorithm&gt;
#include&lt;iostream&gt;
#include&lt;string&gt;
#include&lt;vector&gt;
#include&lt;stack&gt;
#include&lt;bitset&gt;
#include&lt;cstdlib&gt;
#include&lt;cmath&gt;
#include&lt;set&gt;
#include&lt;list&gt;
#include&lt;deque&gt;
#include&lt;map&gt;
#include&lt;queue&gt;
using namespace std;
typedef long long ll;
const double PI = acos(-1.0);
const double eps = 1e-6;
const int INF = 0x3f3f3f3f;
const int MAXN = 50 + 10;
const int MAXK = 10;
const int MAXM = (1 &lt;&lt; 8) + 10;
int n,m;
int mp[MAXN][MAXN], pos[MAXK], time[MAXK], ftim[MAXK];
int FT[MAXN], dp[MAXN][MAXM][MAXM];
void floyd()
{
    for(int k = 1; k &lt;= n; k++)
        for(int i = 1; i &lt;= n; i++)
            for(int j = 1; j &lt;= n; j++)
                    mp[i][j] = min(mp[i][j], mp[i][k] + mp[k][j]);

}
int main()
{
    int T,kase = 0,k;
    cin &gt;&gt; T;
    while(T--)
    {
        int A,B,D;
        scanf(&quot;%d%d%d&quot;,&amp;n,&amp;m,&amp;k);
        //n个点，m个边，k个兴趣点
        for(int i = 1; i &lt;= n; i++)
            for(int j = 1; j &lt;= n; j++)
                mp[i][j] = (i == j ? 0 : INF);
        memset(FT, 0, sizeof FT);
        for(int i = 1; i &lt;= m; i++)
        {
            scanf(&quot;%d%d%d&quot;,&amp;A,&amp;B,&amp;D);
            mp[A][B] = mp[B][A] = D;
        }

        for(int i = 1; i &lt;= k; i++)
        {
            int N;
            scanf(&quot;%d%d%d%d&quot;,&amp;pos[i],&amp;time[i],&amp;ftim[i],&amp;N);
            for(int j = 1; j &lt;= N; j++)
            {
                int temp;           //在temp这个位置可以领到第 i 个景区的FT票
                scanf(&quot;%d&quot;,&amp;temp);
                FT[temp] = FT[temp] | (1 &lt;&lt; (i - 1));   //FT[temp] 表示temp这个位置能领到的兴趣点的FT票
            }
        }
        floyd();    //求最短路，保存到mp[][]
 /*       for(int i = 1; i &lt;= n; i++)
        {
            for(int j = 1; j &lt;= n; j++)
                printf(&quot;%d &quot;,mp[i][j]);
            cout &lt;&lt; endl;
        }*/
        memset(dp, INF, sizeof dp);
        dp[1][0][0] = 0;    // 刷表法的起点 dp[i][s1][s2];
                            // 一共有k个兴趣点，所以为2^k   所以 1 &lt;&lt; (k);
                            // 一共有n个位置点
        int ans = INF;
        for(int s1 = 0; s1 &lt; (1 &lt;&lt; k); s1++)
            for(int s2 = 0; s2 &lt; (1 &lt;&lt; k); s2++)
                for(int i = 1; i &lt;= n; i++) //所处的位置
                {
                    int now = dp[i][s1][s2];
                    if(now == INF)
                        continue;        //说明这是一个没有被刷到过的状态
                    if(s2 == (1 &lt;&lt; k) - 1)  //说明兴趣点全部走完了
                    {
                      //  printf(&quot;i am here\n&quot;);
                        ans = min(ans, now + mp[i][1]);
                        continue;
                    }
            //        printf(&quot; i am here!\n&quot;);
                    for(int j = 1; j &lt;= k; j++) //下一步是去游玩没有游玩过的点
                        if( (s2 &amp; (1 &lt;&lt; (j - 1))) == 0)    //意思是j这个兴趣点没有游玩过,我改了这里
                        {
                            int &amp;nxt = dp[pos[j]][s1 | FT[pos[j]]][ s2 ^ ( 1 &lt;&lt; (j-1) )];    // 用取值符获得下一个状态，然后去更新
                            int tim = 0;
                            if( s1 &amp; (1 &lt;&lt; (j-1)) )   //说明有FT票
                                tim = ftim[j];
                            else
                                tim = time[j];
                            nxt = min(nxt, now + mp[i][pos[j]] + tim);
                         //   printf(&quot;he\n&quot;);
                        }
                    for(int j = 1; j &lt;= n; j++) //下一步是去某个位置点拿票
                    {
                        int &amp;nxt = dp[j][s1 | FT[j]][s2];
                        nxt = min(nxt, now + mp[i][j]);
                       // printf(&quot;her\n&quot;);
                    }


                }
        printf(&quot;Case #%d: %d\n&quot;,++kase,ans);
    }
    return 0;
}</code></pre><h2 id="总结："><a href="#总结：" class="headerlink" title="总结："></a>总结：</h2><p>大部分情况下，最短路算法只是一个预处理而已。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
 <nav class="pagination">
   <a class="extend prev" rel="prev" href="/tpaaaaaa.github.io/page/22/"><i class="fa fa-angle-left" aria-label="accessibility.prev_page"></i></a><a class="page-number" href="/tpaaaaaa.github.io/">1</a><span class="space">&hellip;</span><a class="page-number" href="/tpaaaaaa.github.io/page/22/">22</a><span class="page-number current">23</span><a class="page-number" href="/tpaaaaaa.github.io/page/24/">24</a><a class="page-number" href="/tpaaaaaa.github.io/page/25/">25</a><a class="extend next" rel="next" href="/tpaaaaaa.github.io/page/24/"><i class="fa fa-angle-right" aria-label="accessibility.next_page"></i></a>
 </nav>

          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/tpaaaaaa.github.io/images/avatar.gif"
                alt="我玩维恩不学q" />
            
              <p class="site-author-name" itemprop="name">我玩维恩不学q</p>
              <p class="site-description motion-element" itemprop="description">个人blog</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/tpaaaaaa.github.io/archives">
              
                  <span class="site-state-item-count">245</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/tpaaaaaa.github.io/categories/index.html">
                  <span class="site-state-item-count">12</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tpaaaaaa.github.io/tags/index.html">
                  <span class="site-state-item-count">113</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">我玩维恩不学q</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/tpaaaaaa.github.io/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/tpaaaaaa.github.io/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/tpaaaaaa.github.io/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/tpaaaaaa.github.io/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/tpaaaaaa.github.io/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/tpaaaaaa.github.io/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/tpaaaaaa.github.io/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/tpaaaaaa.github.io/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/tpaaaaaa.github.io/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/tpaaaaaa.github.io/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/tpaaaaaa.github.io/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/tpaaaaaa.github.io/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

</body>
</html>
